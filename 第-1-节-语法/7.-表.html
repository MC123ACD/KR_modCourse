<!DOCTYPE html> <html lang="zh-cn"><head>
<title>7. 表</title>
<base href="..">
<meta name="pathname" content="第-1-节-语法/7.-表.html">
<meta name="description" content="王国保卫战修改教程 - 7. 表">
<meta property="og:title" content="7. 表">
<meta property="og:description" content="王国保卫战修改教程 - 7. 表">
<meta property="og:type" content="website">
<meta property="og:url" content="第-1-节-语法/7.-表.html">
<meta property="og:image" content="undefined">
<meta charset="UTF-8"><meta property="og:site_name" content="王国保卫战修改教程"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=1.0, maximum-scale=5.0"><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="site-lib/rss.xml"><script async="" id="webpage-script" src="site-lib/scripts/webpage.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><link rel="icon" href="site-lib/media/favicon.png"><link rel="preload" href="site-lib/styles/snippets.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/snippets.css"></noscript><link rel="stylesheet" href="site-lib/styles/obsidian.css"><link rel="preload" href="site-lib/styles/other-plugins.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/other-plugins.css"></noscript><link rel="stylesheet" href="site-lib/styles/theme.css"><link rel="preload" href="site-lib/styles/global-variable-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/global-variable-styles.css"></noscript><link rel="preload" href="site-lib/styles/supported-plugins.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/supported-plugins.css"></noscript><link rel="preload" href="site-lib/styles/main-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/main-styles.css"></noscript><style>body{--line-width:40em;--line-width-adaptive:40em;--file-line-width:40em;--sidebar-width:min(20em, 80vw);--collapse-arrow-size:11px;--tree-vertical-spacing:1.3em;--sidebar-margin:12px}:root{background-color:#202124}.sidebar{height:100%;font-size:14px;z-index:10;min-width:calc(var(--sidebar-width) + var(--divider-width-hover));max-width:calc(var(--sidebar-width) + var(--divider-width-hover));position:relative;overflow:hidden;overflow:clip;transition:min-width ease-in-out,max-width ease-in-out;transition-duration:.2s;contain:size}#left-sidebar{left:0}#right-sidebar{right:0}.sidebar.is-collapsed{min-width:0;max-width:0}.sidebar.floating{position:absolute}.sidebar .leaf-content{height:100%;min-width:calc(var(--sidebar-width) - var(--divider-width-hover));top:0;padding:var(--sidebar-margin);padding-top:4em;line-height:var(--line-height-tight);background-color:var(--background-secondary);transition:background-color,border-right,border-left,box-shadow;transition-duration:var(--color-fade-speed);transition-timing-function:ease-in-out;position:absolute;display:flex;flex-direction:column}.sidebar:not(.is-collapsed) .leaf-content{min-width:calc(max(100%,var(--sidebar-width)) - 3px);max-width:calc(max(100%,var(--sidebar-width)) - 3px)}#left-sidebar-content{left:0;border-top-right-radius:var(--radius-l);border-bottom-right-radius:var(--radius-l)}#right-sidebar-content{right:0;border-top-left-radius:var(--radius-l);border-bottom-left-radius:var(--radius-l)}.sidebar #left-sidebar-content,.sidebar #right-sidebar-content{contain:none!important;container-type:normal!important;animation:none!important}.sidebar:has(.leaf-content:empty):has(.topbar-content:empty){display:none}.sidebar-topbar{height:calc(2.3em + 2 * var(--sidebar-margin));width:var(--sidebar-width);padding:var(--sidebar-margin);z-index:1;position:fixed;display:flex;align-items:center;transition:width ease-in-out;transition-duration:inherit}.sidebar.is-collapsed .sidebar-topbar{width:calc(2.3em + var(--sidebar-margin) * 2)}.sidebar .sidebar-topbar.is-collapsed{width:0}#left-sidebar .sidebar-topbar{left:0;flex-direction:row;border-top-right-radius:var(--radius-l)}#right-sidebar .sidebar-topbar{right:0;flex-direction:row-reverse;border-top-left-radius:var(--radius-l)}#left-sidebar .topbar-content{margin-right:calc(2.3em + var(--sidebar-margin));flex-direction:row}#right-sidebar .topbar-content{margin-left:calc(2.3em + var(--sidebar-margin));flex-direction:row-reverse}.topbar-content{overflow:hidden visible;overflow:clip visible;width:100%;height:100%;display:flex;align-items:center;transition:inherit}.sidebar.is-collapsed .topbar-content{width:0;transition:inherit}.clickable-icon.sidebar-collapse-icon{background-color:transparent;color:var(--icon-color-focused);padding:2px!important;margin:0!important;height:100%!important;width:2.3em!important;margin-inline:0.14em!important;position:absolute}#left-sidebar .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);right:var(--sidebar-margin)}#right-sidebar .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);left:var(--sidebar-margin)}.clickable-icon.sidebar-collapse-icon svg.svg-icon{width:100%;height:100%}.feature-title{margin-left:1px;text-transform:uppercase;letter-spacing:.06em;margin-top:.75em;margin-bottom:.75em}.feature-header{display:flex;align-items:center;padding-top:0;font-size:1em;padding-left:0}body.floating-sidebars .sidebar{position:absolute}body{transition:background-color var(--color-fade-speed) ease-in-out}#navbar:not(:empty){display:flex;align-items:center;justify-content:space-between;padding:.5em 1em;width:100%}#main{display:flex;flex-direction:column;height:100%;width:100%;align-items:stretch;justify-content:center}#main-horizontal{display:flex;flex-direction:row;flex-grow:1;width:100%;align-items:stretch;justify-content:center}#center-content{flex-basis:100%;max-width:100%;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;transition:opacity .2s ease-in-out;contain:inline-size}.hide{opacity:0!important;transition:opacity .2s ease-in-out;pointer-events:none}#center-content>.obsidian-document{padding-left:2em;padding-right:1em;margin-bottom:0;width:100%;width:-webkit-fill-available;width:-moz-available;width:fill-available;transition:background-color var(--color-fade-speed) ease-in-out;border-top-right-radius:var(--window-radius,var(--radius-m));border-top-left-radius:var(--window-radius,var(--radius-m));overflow-x:hidden!important;overflow-y:auto!important;display:flex!important;flex-direction:column!important;align-items:center!important;contain:inline-size}body #center-content>.obsidian-document>.markdown-preview-sizer{padding-bottom:80vh;width:100%;max-width:var(--line-width);flex-basis:var(--line-width);transition:background-color var(--color-fade-speed) ease-in-out;contain:inline-size}#center-content>.obsidian-document>div{width:100%!important;transition:background-color var(--color-fade-speed) ease-in-out;contain:inline-size}#center-content>.obsidian-document:not([data-type=markdown]).embed{display:flex;padding:1em;height:100%;width:100%;align-items:center;justify-content:center}#center-content>.obsidian-document:not([data-type=markdown]).embed>*{max-width:100%;max-height:100%;object-fit:contain}:not(h1,h2,h3,h4,h5,h6,li):has(> :is(.math,table)){overflow-x:auto!important}#center-content>.obsidian-document:not([data-type=markdown]){overflow-x:auto;contain:content;padding:0;margin:0;height:100%}.obsidian-document[data-type=attachment]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;width:100%}.obsidian-document[data-type=attachment]>*{outline:0;border:none;box-shadow:none}.obsidian-document[data-type=attachment] :is(img){max-width:90%;max-height:90%;object-fit:contain}.obsidian-document[data-type=attachment]>:is(audio){width:100%;max-width:min(90%,var(--line-width))}.obsidian-document[data-type=attachment]>:is(embed,iframe,video){width:100%;height:100%;max-width:100%;max-height:100%;object-fit:contain}.canvas-wrapper>:is(.header,.footer){z-index:100;position:absolute;display:flex;justify-content:center;flex-direction:column;width:100%;align-items:center}.scroll-highlight{position:absolute;width:100%;height:100%;pointer-events:none;z-index:1000;background-color:hsla(var(--color-accent-hsl),.25);opacity:0;padding:1em;inset:50%;translate:-50% -50%;border-radius:var(--radius-s)}</style><script defer="">async function loadIncludes(){let e=document.querySelectorAll("link[itemprop='include']");for(const t of e){let e=t.getAttribute("href");try{let o="";if(e.startsWith("https:")||e.startsWith("http:")||"file:"!=window.location.protocol){const n=await fetch(e);if(!n.ok){console.log("Could not include file: "+e),t?.remove();continue}o=await n.text()}else{const t=document.getElementById(btoa(encodeURI(e)));if(t){const e=JSON.parse(decodeURI(atob(t.getAttribute("value")??"")));o=e?.data??""}}let n=document.createRange().createContextualFragment(o);t.before(n),t.remove(),console.log("Included text: "+o),console.log("Included file: "+e)}catch(o){t?.remove(),console.log("Could not include file: "+e,o);continue}}}document.addEventListener("DOMContentLoaded",(()=>{loadIncludes()}));let isFileProtocol="file:"==location.protocol;function waitLoadScripts(e,t){let o=e.map((e=>document.getElementById(e+"-script")));!function e(n){let l=o[n],c=n+1;l?(l&&"true"!=l.getAttribute("loaded")||n<o.length&&e(c),n<o.length&&l.addEventListener("load",(()=>e(c)))):n<o.length?e(c):t()}(0)}</script></head><body class="publish css-settings-manager mod-windows is-frameless is-hidden-frameless styled-scrollbars show-inline-title show-ribbon background-settings-workplace-theme-dark-in-the-sky background-image-settings-markdown-page-custom notebook-liked-markdown-page-grid-notebook-1 panel-page-bg-theme-light-custom panel-page-bg-theme-dark-plant hide-left-ribbon-retention-drawer toggle-divider-lines toggle-header-bottom-line bt-bubble-layout bt-bubble-layout-hide-borders remove-heading-indicator h1-toggle-underline toggle-left-aligned-content fancy-hr-no-icon custom-unordered-list custom-ordered-list list-no-border folder-icons bt-toggle-colorful-folder folder-style-change-options-colorful-default folder-colorful-one table-width-auto table-style-two link-underline-internal enable-alternative-checkboxes default-loading-page loading-text-typing-style rainbow-tag translucent-setting-panel underline-tab-style canvas-card-text-middle admonition-bg-color-same toggle-calendar-shadow style-options-for-buttons-plugin dataview-list-style-pacman memos-banner-gradient thino-frosted-style thino-background-default quiet-outline-optimize code-theme-sublime is-focused"><script defer="">let theme=localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");"dark"==theme?(document.body.classList.add("theme-dark"),document.body.classList.remove("theme-light")):(document.body.classList.add("theme-light"),document.body.classList.remove("theme-dark")),window.innerWidth<480?document.body.classList.add("is-phone"):window.innerWidth<768?document.body.classList.add("is-tablet"):window.innerWidth<1024?document.body.classList.add("is-small-screen"):document.body.classList.add("is-large-screen")</script><div class="parsed-feature-container" style="display: contents;"><link itemprop="include" href="site-lib/html/custom-head-content-content.html"></div><div id="main"><div id="navbar"></div><div id="main-horizontal"><div id="left-content" class="leaf" style="--sidebar-width: var(--sidebar-width-left);"><div id="left-sidebar" class="sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"><div id="search-container"><div id="search-wrapper"><input enterkeyhint="search" type="search" spellcheck="false" placeholder="Search..."><div aria-label="Clear search" id="search-clear-button"></div></div></div></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content-wrapper"><div id="left-sidebar-content" class="leaf-content"><link itemprop="include" href="site-lib/html/file-tree-content.html"></div></div><script defer="">let ls = document.querySelector("#left-sidebar"); ls.classList.toggle("is-collapsed", window.innerWidth < 768); ls.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-left-width"));</script></div></div><div id="center-content" class="leaf"><div class="obsidian-document markdown-preview-view markdown-rendered node-insert-event allow-fold-headings show-indentation-guide show-properties is-readable-line-width" data-type="markdown"><style id="MJX-CHTML-styles"></style><div class="markdown-preview-sizer markdown-preview-section"><div class="header"><h1 class="page-title heading inline-title" id="7._表_0">7. 表</h1><div class="data-bar"></div></div><div class="markdown-preview-pusher" style="width: 1px; height: 0.1px; margin-bottom: 0px;"></div><div class="el-h2"><h2 data-heading="7.1 什么是表？" dir="auto" class="heading" id="7.1_什么是表？_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>7.1 什么是表？</h2></div><div class="el-p"><p dir="auto">表是 Lua 中唯一的数据结构，但它极其强大和灵活。通过表，Lua 可以实现数组、字典、对象、模块等几乎所有复杂数据结构。</p></div><div class="el-h3"><h3 data-heading="表的核心理念" dir="auto" class="heading" id="表的核心理念_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>表的核心理念</h3></div><div class="el-pre"><pre class="language-lua"><code data-line="0" class="language-lua is-loaded"><span class="token comment">-- 比喻：表就像一个"万能容器"</span>
<span class="token comment">-- 想象一下，有一个魔法背包：</span>
<span class="token comment">-- 1. 可以按顺序放东西（数组）</span>
<span class="token comment">-- 2. 可以给东西贴标签，按名字找（字典）</span>
<span class="token comment">-- 3. 可以放其他背包（嵌套）</span>
<span class="token comment">-- 4. 甚至可以放"使用说明"（函数）</span>

<span class="token comment">-- 实际示例：一个表可以表示一个游戏角色</span>
<span class="token keyword">local</span> player <span class="token operator">=</span> <span class="token punctuation">{</span>
    name <span class="token operator">=</span> <span class="token string">"小明"</span><span class="token punctuation">,</span>		<span class="token comment">-- 字符串键</span>
    level <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span>			<span class="token comment">-- 字符串键</span>
    health <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span>		<span class="token comment">-- 字符串键</span>
    <span class="token punctuation">[</span><span class="token string">"武器类型"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"剑"</span><span class="token punctuation">,</span>	<span class="token comment">-- 包含特殊字符的键</span>
    <span class="token punctuation">[</span><span class="token number">123</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"编号"</span><span class="token punctuation">,</span>		<span class="token comment">-- 数字键</span>
    is_online <span class="token operator">=</span> <span class="token keyword">true</span>	<span class="token comment">-- 布尔值键</span>
<span class="token punctuation">}</span>

<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"玩家姓名: "</span> <span class="token operator">..</span> player<span class="token punctuation">.</span>name<span class="token punctuation">)</span>		<span class="token comment">-- 小明</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"玩家等级: "</span> <span class="token operator">..</span> player<span class="token punctuation">.</span>level<span class="token punctuation">)</span>		<span class="token comment">-- 10</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"特殊键: "</span> <span class="token operator">..</span> player<span class="token punctuation">[</span><span class="token string">"武器类型"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>	<span class="token comment">-- 剑</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"数字键: "</span> <span class="token operator">..</span> player<span class="token punctuation">[</span><span class="token number">123</span><span class="token punctuation">]</span><span class="token punctuation">)</span>			<span class="token comment">-- 编号</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h2"><h2 data-heading="7.2 表的创建和初始化" dir="auto" class="heading" id="7.2_表的创建和初始化_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>7.2 表的创建和初始化</h2></div><div class="el-h3"><h3 data-heading="7.2.1 创建空表" dir="auto" class="heading" id="7.2.1_创建空表_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>7.2.1 创建空表</h3></div><div class="el-pre"><pre class="language-lua"><code data-line="0" class="language-lua is-loaded"><span class="token comment">-- 创建空表</span>
<span class="token keyword">local</span> empty_table <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token comment">-- 最简单的空表</span>

<span class="token comment">-- 检查表是否为空</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"空表大小: "</span> <span class="token operator">..</span> <span class="token operator">#</span>empty_table<span class="token punctuation">)</span>  <span class="token comment">-- 输出: 0</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"空表类型: "</span> <span class="token operator">..</span> <span class="token function">type</span><span class="token punctuation">(</span>empty_table<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">-- 输出: table</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h3"><h3 data-heading="7.2.2 使用构造器初始化表" dir="auto" class="heading" id="7.2.2_使用构造器初始化表_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>7.2.2 使用构造器初始化表</h3></div><div class="el-h4"><h4 data-heading="作为数组（列表）使用" dir="auto" class="heading" id="作为数组（列表）使用_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>作为数组（列表）使用</h4></div><div class="el-pre"><pre class="language-lua"><code data-line="0" class="language-lua is-loaded"><span class="token comment">-- 注意：Lua的数组索引从1开始！</span>
<span class="token keyword">local</span> monsters <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"僵尸"</span><span class="token punctuation">,</span> <span class="token string">"骷髅"</span><span class="token punctuation">,</span> <span class="token string">"蜘蛛"</span><span class="token punctuation">,</span> <span class="token string">"土匪"</span><span class="token punctuation">}</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"第一个怪物: "</span> <span class="token operator">..</span> monsters<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>	<span class="token comment">-- 僵尸</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"怪物数量: "</span> <span class="token operator">..</span> <span class="token operator">#</span>monsters<span class="token punctuation">)</span>		<span class="token comment">-- 4</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h4"><h4 data-heading="作为字典（映射）使用" dir="auto" class="heading" id="作为字典（映射）使用_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>作为字典（映射）使用</h4></div><div class="el-pre"><pre class="language-lua"><code data-line="0" class="language-lua is-loaded"><span class="token keyword">local</span> player <span class="token operator">=</span> <span class="token punctuation">{</span>
    name <span class="token operator">=</span> <span class="token string">"李雷"</span><span class="token punctuation">,</span>
    age <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">,</span>
    class <span class="token operator">=</span> <span class="token string">"战士"</span><span class="token punctuation">,</span>
    level <span class="token operator">=</span> <span class="token number">5</span>
<span class="token punctuation">}</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"玩家: "</span> <span class="token operator">..</span> player<span class="token punctuation">.</span>name<span class="token punctuation">)</span>		<span class="token comment">-- 李雷</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"职业: "</span> <span class="token operator">..</span> player<span class="token punctuation">[</span><span class="token string">"class"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>	<span class="token comment">-- 战士</span>

<span class="token comment">-- 使用方括号的复杂键</span>
<span class="token keyword">local</span> complex_keys <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token string">"full name"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"张三"</span><span class="token punctuation">,</span>		<span class="token comment">-- 包含空格的键</span>
    <span class="token punctuation">[</span><span class="token string">"score-100"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">95</span><span class="token punctuation">,</span>			<span class="token comment">-- 包含连字符的键</span>
    <span class="token punctuation">[</span><span class="token keyword">true</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"布尔键"</span><span class="token punctuation">,</span>			<span class="token comment">-- 布尔值作为键</span>
    <span class="token punctuation">[</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">end</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"函数键"</span>  <span class="token comment">-- 函数作为键（不常见但可能）</span>
<span class="token punctuation">}</span>

<span class="token function">print</span><span class="token punctuation">(</span>complex_keys<span class="token punctuation">[</span><span class="token string">"full name"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment">-- 张三</span>
<span class="token function">print</span><span class="token punctuation">(</span>complex_keys<span class="token punctuation">[</span><span class="token keyword">true</span><span class="token punctuation">]</span><span class="token punctuation">)</span>         <span class="token comment">-- 布尔键</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h4"><h4 data-heading="混合使用（数组部分+字典部分）" dir="auto" class="heading" id="混合使用（数组部分+字典部分）_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>混合使用（数组部分+字典部分）</h4></div><div class="el-pre"><pre class="language-lua"><code data-line="0" class="language-lua is-loaded"><span class="token keyword">local</span> mixed <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">"第一个元素"</span><span class="token punctuation">,</span>    <span class="token comment">-- 数组部分，索引1</span>
    <span class="token string">"第二个元素"</span><span class="token punctuation">,</span>    <span class="token comment">-- 数组部分，索引2</span>

    author <span class="token operator">=</span> <span class="token string">"小明"</span><span class="token punctuation">,</span>	<span class="token comment">-- 字典部分，键"author"</span>
    version <span class="token operator">=</span> <span class="token number">1.0</span>	<span class="token comment">-- 字典部分，键"version"</span>
<span class="token punctuation">}</span>
<span class="token function">print</span><span class="token punctuation">(</span>mixed<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token comment">-- 第一个元素</span>
<span class="token function">print</span><span class="token punctuation">(</span>mixed<span class="token punctuation">.</span>author<span class="token punctuation">)</span>        <span class="token comment">-- 小明</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h4"><h4 data-heading="嵌套表" dir="auto" class="heading" id="嵌套表_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>嵌套表</h4></div><div class="el-pre"><pre class="language-lua"><code data-line="0" class="language-lua is-loaded"><span class="token keyword">local</span> game_world <span class="token operator">=</span> <span class="token punctuation">{</span>
    name <span class="token operator">=</span> <span class="token string">"魔法世界"</span><span class="token punctuation">,</span>
    players <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token punctuation">{</span>name <span class="token operator">=</span> <span class="token string">"战士"</span><span class="token punctuation">,</span> level <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>name <span class="token operator">=</span> <span class="token string">"法师"</span><span class="token punctuation">,</span> level <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    settings <span class="token operator">=</span> <span class="token punctuation">{</span>
        difficulty <span class="token operator">=</span> <span class="token string">"normal"</span><span class="token punctuation">,</span>
        sound <span class="token operator">=</span> <span class="token keyword">true</span><span class="token punctuation">,</span>
        graphics <span class="token operator">=</span> <span class="token string">"high"</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"游戏世界: "</span> <span class="token operator">..</span> game_world<span class="token punctuation">.</span>name<span class="token punctuation">)</span>	<span class="token comment">-- 魔法世界</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"第一个玩家: "</span> <span class="token operator">..</span> game_world<span class="token punctuation">.</span>players<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>  <span class="token comment">-- 战士</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"难度设置: "</span> <span class="token operator">..</span> game_world<span class="token punctuation">.</span>settings<span class="token punctuation">.</span>difficulty<span class="token punctuation">)</span>  <span class="token comment">-- normal</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h3"><h3 data-heading="7.2.3 表的引用特性" dir="auto" class="heading" id="7.2.3_表的引用特性_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>7.2.3 表的引用特性</h3></div><div class="el-p"><p dir="auto">表传递引用是因为它<strong>可能很大且需要共享修改（多个变量操作一个表）</strong>，传递指针更高效。</p></div><div class="el-pre"><pre class="language-lua"><code data-line="0" class="language-lua is-loaded"><span class="token comment">-- 重要概念：表是引用类型</span>
<span class="token keyword">local</span> original <span class="token operator">=</span> <span class="token punctuation">{</span>x <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">}</span>
<span class="token keyword">local</span> reference <span class="token operator">=</span> original  <span class="token comment">-- 不是复制，是引用同一个表</span>

reference<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">100</span>  <span class="token comment">-- 修改引用也会影响原始表</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"original.x = "</span> <span class="token operator">..</span> original<span class="token punctuation">.</span>x<span class="token punctuation">)</span>  <span class="token comment">-- 100</span>

<span class="token comment">-- 如果需要复制表，需要手动操作（后面会讲）</span>

<span class="token comment">-- 表的相等比较是比较引用，不是内容</span>
<span class="token keyword">local</span> a <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span>
<span class="token keyword">local</span> b <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span>
<span class="token keyword">local</span> c <span class="token operator">=</span> a

<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"a == b ? "</span> <span class="token operator">..</span> <span class="token function">tostring</span><span class="token punctuation">(</span>a <span class="token operator">==</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">-- false（不同对象）</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"a == c ? "</span> <span class="token operator">..</span> <span class="token function">tostring</span><span class="token punctuation">(</span>a <span class="token operator">==</span> c<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">-- true（同一对象）</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h2"><h2 data-heading="7.3 表的操作" dir="auto" class="heading" id="7.3_表的操作_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>7.3 表的操作</h2></div><div class="el-h3"><h3 data-heading="7.3.1 直接修改与增加元素" dir="auto" class="heading" id="7.3.1_直接修改与增加元素_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>7.3.1 直接修改与增加元素</h3></div><div class="el-p"><p dir="auto">我们可以直接通过等于号来增加与修改元素，缺点是数组必须要知道增加位置。</p></div><div class="el-pre"><pre class="language-lua"><code data-line="0" class="language-lua is-loaded"><span class="token comment">-- 列表</span>
<span class="token keyword">local</span> monsters <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"僵尸"</span><span class="token punctuation">,</span> <span class="token string">"骷髅"</span><span class="token punctuation">,</span> <span class="token string">"蜘蛛"</span><span class="token punctuation">,</span> <span class="token string">"土匪"</span><span class="token punctuation">}</span>
monsters<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"恶魔"</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"第一个怪物: "</span> <span class="token operator">..</span> monsters<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>	<span class="token comment">-- 恶魔</span>

<span class="token comment">-- 字典</span>
<span class="token comment">-- 创建空表</span>
<span class="token keyword">local</span> inventory <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment">-- 添加元素到字典部分</span>
inventory<span class="token punctuation">[</span><span class="token string">"gold"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">100</span>
<span class="token comment">-- inventory.gold = 100  -- 等价写法</span>
inventory<span class="token punctuation">.</span>silver <span class="token operator">=</span> <span class="token number">50</span>
inventory<span class="token punctuation">.</span>copper <span class="token operator">=</span> <span class="token number">200</span>

<span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>inventory<span class="token punctuation">)</span> <span class="token keyword">do</span>
	<span class="token function">print</span><span class="token punctuation">(</span>k <span class="token operator">..</span> <span class="token string">": "</span> <span class="token operator">..</span> v<span class="token punctuation">)</span>
<span class="token keyword">end</span>
<span class="token comment">--[[ 输出
copper: 200
silver: 50
gold: 100
--]]</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h3"><h3 data-heading="7.3.2 table.insert - 插入元素到数组" dir="auto" class="heading" id="7.3.2_table.insert_-_插入元素到数组_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>7.3.2 table.insert - 插入元素到数组</h3></div><div class="el-p"><p dir="auto">table.insert 会在数组的指定位置插入一个新元素，并将该位置及之后的元素依次后移。</p></div><div class="el-pre"><pre class="language-lua"><code data-line="0" class="language-lua is-loaded"><span class="token comment">-- 不指定增加位置</span>
table<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>表<span class="token punctuation">:</span> table<span class="token punctuation">,</span> 元素<span class="token punctuation">:</span> any<span class="token punctuation">)</span>
<span class="token comment">-- 指定增加位置</span>
table<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>表<span class="token punctuation">:</span> table<span class="token punctuation">,</span> 增加位置<span class="token punctuation">:</span> any<span class="token punctuation">,</span> 元素<span class="token punctuation">:</span> any<span class="token punctuation">)</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>增加位置默认为数组末尾</li>
</ul></div><div class="el-h4"><h4 data-heading="示例" dir="auto" class="heading" id="示例_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>示例</h4></div><div class="el-pre"><pre class="language-lua"><code data-line="0" class="language-lua is-loaded"><span class="token keyword">local</span> inventory <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment">-- 添加元素到数组末尾</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"添加元素到数组末尾"</span><span class="token punctuation">)</span>
table<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>inventory<span class="token punctuation">,</span> <span class="token string">"药水"</span><span class="token punctuation">)</span>
table<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>inventory<span class="token punctuation">,</span> <span class="token string">"钥匙"</span><span class="token punctuation">)</span>
inventory<span class="token punctuation">[</span><span class="token operator">#</span>inventory <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"地图"</span> <span class="token comment">-- 等价写法</span>

<span class="token comment">-- 修改元素</span>
inventory<span class="token punctuation">.</span>gold <span class="token operator">=</span> <span class="token number">150</span> <span class="token comment">-- 修改现有元素</span>
inventory<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"万能钥匙"</span> <span class="token comment">-- 修改数组部分</span>

<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"库存:"</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>inventory<span class="token punctuation">)</span> <span class="token keyword">do</span>
    <span class="token function">print</span><span class="token punctuation">(</span>k <span class="token operator">..</span> <span class="token string">": "</span> <span class="token operator">..</span> v<span class="token punctuation">)</span>
<span class="token keyword">end</span>

<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"\n插入元素 “剑” 到数组第二个索引，将元素 2 后移。"</span><span class="token punctuation">)</span>
table<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>inventory<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"剑"</span><span class="token punctuation">)</span>

<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"库存:"</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>inventory<span class="token punctuation">)</span> <span class="token keyword">do</span>
    <span class="token function">print</span><span class="token punctuation">(</span>k <span class="token operator">..</span> <span class="token string">": "</span> <span class="token operator">..</span> v<span class="token punctuation">)</span>
<span class="token keyword">end</span>
<span class="token comment">--[[ 输出
插入元素到数组末尾
库存:
1: 药水
2: 万能钥匙
3: 地图
gold: 150

添加元素 “剑” 到数组第二个索引，将元素 2 后移
库存:
1: 药水
2: 剑
3: 万能钥匙
4: 地图
gold: 150
--]]</span>

<span class="token comment">-- 示例：模拟queue（队列）操作</span>
<span class="token keyword">local</span> queue <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">local</span> <span class="token keyword">function</span> <span class="token function">enqueue</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
    table<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>queue<span class="token punctuation">,</span> item<span class="token punctuation">)</span>
<span class="token keyword">end</span>

<span class="token keyword">local</span> <span class="token keyword">function</span> <span class="token function">dequeue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token operator">#</span>queue <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token keyword">then</span>
        <span class="token keyword">return</span> table<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>queue<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token keyword">end</span>

    <span class="token keyword">return</span> <span class="token keyword">nil</span>
<span class="token keyword">end</span>

<span class="token comment">-- 测试队列</span>
<span class="token function">enqueue</span><span class="token punctuation">(</span><span class="token string">"任务1"</span><span class="token punctuation">)</span>
<span class="token function">enqueue</span><span class="token punctuation">(</span><span class="token string">"任务2"</span><span class="token punctuation">)</span>
<span class="token function">enqueue</span><span class="token punctuation">(</span><span class="token string">"任务3"</span><span class="token punctuation">)</span>

<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"\n队列操作:"</span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"出队: "</span> <span class="token operator">..</span> <span class="token function">dequeue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">-- 任务1</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"出队: "</span> <span class="token operator">..</span> <span class="token function">dequeue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">-- 任务2</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"当前队列长度: "</span> <span class="token operator">..</span> <span class="token operator">#</span>queue<span class="token punctuation">)</span> <span class="token comment">-- 1</span>
<span class="token comment">--[[ 输出
出队: 任务1
出队: 任务2
当前队列长度: 1
--]]</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h3"><h3 data-heading="7.3.3 table.remove - 移除数组元素" dir="auto" class="heading" id="7.3.3_table.remove_-_移除数组元素_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>7.3.3 table.remove - 移除数组元素</h3></div><div class="el-p"><p dir="auto">table.remove 用于移除数组中指定位置的元素，并将后续元素前移以填补空缺，保持数组的连续性。</p></div><div class="el-pre"><pre class="language-lua"><code data-line="0" class="language-lua is-loaded">table<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>表<span class="token punctuation">:</span> table<span class="token punctuation">,</span> 删除位置?<span class="token punctuation">:</span> int<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> 删除的元素<span class="token punctuation">:</span> any
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>移除位置默认为数组末尾</li>
</ul></div><div class="el-h4"><h4 data-heading="示例" dir="auto" class="heading" id="示例_1"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>示例</h4></div><div class="el-pre"><pre class="language-lua"><code data-line="0" class="language-lua is-loaded"><span class="token comment">-- 1. 直接删除，缺点：删除数组元素后数组有 “洞”</span>
<span class="token keyword">local</span> items <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">"剑"</span><span class="token punctuation">,</span>
    <span class="token string">"盾"</span><span class="token punctuation">,</span>
    <span class="token string">"药水"</span><span class="token punctuation">,</span>
    <span class="token string">"钥匙"</span><span class="token punctuation">,</span>
    <span class="token string">"地图"</span><span class="token punctuation">,</span>
    gold <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span>
    weight <span class="token operator">=</span> <span class="token number">50</span>
<span class="token punctuation">}</span>

<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"原始物品:"</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>items<span class="token punctuation">)</span> <span class="token keyword">do</span>
    <span class="token function">print</span><span class="token punctuation">(</span>k <span class="token operator">..</span> <span class="token string">": "</span> <span class="token operator">..</span> v<span class="token punctuation">)</span>
<span class="token keyword">end</span>

<span class="token comment">-- 删除数组元素</span>
items<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">nil</span> <span class="token comment">-- 删除第二个元素（盾）</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"\n删除盾牌后:"</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>items<span class="token punctuation">)</span> <span class="token keyword">do</span>
    <span class="token function">print</span><span class="token punctuation">(</span>k <span class="token operator">..</span> <span class="token string">": "</span> <span class="token operator">..</span> v<span class="token punctuation">)</span>
<span class="token keyword">end</span>

<span class="token comment">-- 注意：设置nil不会自动调整数组</span>
<span class="token comment">-- 数组部分可能会有"洞"</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"\n有洞的数组遍历（ipairs会在第一个nil停止）:"</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> i<span class="token punctuation">,</span> v <span class="token keyword">in</span> <span class="token function">ipairs</span><span class="token punctuation">(</span>items<span class="token punctuation">)</span> <span class="token keyword">do</span>
    <span class="token function">print</span><span class="token punctuation">(</span>i <span class="token operator">..</span> <span class="token string">": "</span> <span class="token operator">..</span> v<span class="token punctuation">)</span>
<span class="token keyword">end</span>

<span class="token comment">-- 删除字典元素</span>
items<span class="token punctuation">.</span>gold <span class="token operator">=</span> <span class="token keyword">nil</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"\n删除金币后:"</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>items<span class="token punctuation">)</span> <span class="token keyword">do</span>
    <span class="token function">print</span><span class="token punctuation">(</span>k <span class="token operator">..</span> <span class="token string">": "</span> <span class="token operator">..</span> v<span class="token punctuation">)</span>
<span class="token keyword">end</span>
<span class="token comment">--[[ 删除
原始物品:
1: 剑
2: 盾
3: 药水
4: 钥匙
5: 地图
weight: 50
gold: 100

删除盾牌后:
1: 剑
3: 药水
4: 钥匙
5: 地图
weight: 50
gold: 100

有洞的数组遍历（ipairs会在第一个nil停止）:
1: 剑

删除金币后:
1: 剑
3: 药水
4: 钥匙
5: 地图
weight: 50
--]]</span>

<span class="token comment">-- 2. 使用 table.remove 移除后自动调整数组</span>
<span class="token keyword">local</span> items <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">"剑"</span><span class="token punctuation">,</span>
    <span class="token string">"盾"</span><span class="token punctuation">,</span>
    <span class="token string">"药水"</span><span class="token punctuation">,</span>
    <span class="token string">"钥匙"</span><span class="token punctuation">,</span>
    <span class="token string">"地图"</span><span class="token punctuation">,</span>
    gold <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span>
    weight <span class="token operator">=</span> <span class="token number">50</span>
<span class="token punctuation">}</span>

<span class="token keyword">local</span> removed <span class="token operator">=</span> table<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>items<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>	<span class="token comment">-- 移除第二个索引的元素（盾）</span>

<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"移除了"</span> <span class="token operator">..</span> removed <span class="token operator">..</span> <span class="token string">"，现在第二个索引的元素:"</span> <span class="token operator">..</span> items<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"ipairs 遍历（table.remove 自动补洞）:"</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> i<span class="token punctuation">,</span> v <span class="token keyword">in</span> <span class="token function">ipairs</span><span class="token punctuation">(</span>items<span class="token punctuation">)</span> <span class="token keyword">do</span>
    <span class="token function">print</span><span class="token punctuation">(</span>i <span class="token operator">..</span> <span class="token string">": "</span> <span class="token operator">..</span> v<span class="token punctuation">)</span>
<span class="token keyword">end</span>
<span class="token comment">--[[ 输出
移除了盾，现在第二个索引的元素: 药水

ipairs 遍历（table.remove 自动补洞）:
1: 剑
2: 药水
3: 钥匙
4: 地图
--]]</span>

<span class="token comment">-- 实际游戏中删除物品的例子</span>
<span class="token keyword">local</span> backpack <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">"红药水"</span><span class="token punctuation">,</span> <span class="token string">"蓝药水"</span><span class="token punctuation">,</span> <span class="token string">"传送卷轴"</span><span class="token punctuation">,</span> <span class="token string">"回城卷轴"</span><span class="token punctuation">,</span> <span class="token string">"解毒剂"</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">remove_item</span><span class="token punctuation">(</span>container<span class="token punctuation">,</span> item_name<span class="token punctuation">)</span>
    <span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token operator">#</span>container<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token keyword">do</span>  <span class="token comment">-- 从后往前遍历，避免索引变化问题</span>
        <span class="token keyword">if</span> container<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> item_name <span class="token keyword">then</span>
            table<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>container<span class="token punctuation">,</span> i<span class="token punctuation">)</span>
            <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"已移除: "</span> <span class="token operator">..</span> item_name<span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token keyword">true</span>
        <span class="token keyword">end</span>
    <span class="token keyword">end</span>
    
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"未找到物品: "</span> <span class="token operator">..</span> item_name<span class="token punctuation">)</span>
    
    <span class="token keyword">return</span> <span class="token keyword">false</span>
<span class="token keyword">end</span>

<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"\n背包内容:"</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> i<span class="token punctuation">,</span> v <span class="token keyword">in</span> <span class="token function">ipairs</span><span class="token punctuation">(</span>backpack<span class="token punctuation">)</span> <span class="token keyword">do</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"  "</span> <span class="token operator">..</span> i <span class="token operator">..</span> <span class="token string">": "</span> <span class="token operator">..</span> v<span class="token punctuation">)</span>
<span class="token keyword">end</span>

<span class="token function">remove_item</span><span class="token punctuation">(</span>backpack<span class="token punctuation">,</span> <span class="token string">"传送卷轴"</span><span class="token punctuation">)</span>
<span class="token function">remove_item</span><span class="token punctuation">(</span>backpack<span class="token punctuation">,</span> <span class="token string">"不存在的物品"</span><span class="token punctuation">)</span>

<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"\n移除后的背包:"</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> i<span class="token punctuation">,</span> v <span class="token keyword">in</span> <span class="token function">ipairs</span><span class="token punctuation">(</span>backpack<span class="token punctuation">)</span> <span class="token keyword">do</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"  "</span> <span class="token operator">..</span> i <span class="token operator">..</span> <span class="token string">": "</span> <span class="token operator">..</span> v<span class="token punctuation">)</span>
<span class="token keyword">end</span>
<span class="token comment">--[[ 输出
背包内容:
  1: 红药水
  2: 蓝药水
  3: 传送卷轴
  4: 回城卷轴
  5: 解毒剂
已移除: 传送卷轴
未找到物品: 不存在的物品

移除后的背包:
  1: 红药水
  2: 蓝药水
  3: 回城卷轴
  4: 解毒剂
--]]</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h3"><h3 data-heading="7.3.4 查询元素" dir="auto" class="heading" id="7.3.4_查询元素_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>7.3.4 查询元素</h3></div><div class="el-pre"><pre class="language-lua"><code data-line="0" class="language-lua is-loaded"><span class="token keyword">local</span> game_data <span class="token operator">=</span> <span class="token punctuation">{</span>
    players <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token punctuation">{</span>name <span class="token operator">=</span> <span class="token string">"小明"</span><span class="token punctuation">,</span> score <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>name <span class="token operator">=</span> <span class="token string">"小红"</span><span class="token punctuation">,</span> score <span class="token operator">=</span> <span class="token number">850</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>name <span class="token operator">=</span> <span class="token string">"小刚"</span><span class="token punctuation">,</span> score <span class="token operator">=</span> <span class="token number">920</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    settings <span class="token operator">=</span> <span class="token punctuation">{</span>
        sound <span class="token operator">=</span> <span class="token punctuation">{</span>volume <span class="token operator">=</span> <span class="token number">70</span><span class="token punctuation">,</span> enabled <span class="token operator">=</span> <span class="token keyword">true</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        graphics <span class="token operator">=</span> <span class="token punctuation">{</span>quality <span class="token operator">=</span> <span class="token string">"high"</span><span class="token punctuation">,</span> resolution <span class="token operator">=</span> <span class="token string">"1920x1080"</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">-- 检查键是否存在</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"检查键是否存在:"</span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"有players键吗? "</span> <span class="token operator">..</span> <span class="token function">tostring</span><span class="token punctuation">(</span>game_data<span class="token punctuation">.</span>players <span class="token operator">~=</span> <span class="token keyword">nil</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">-- true</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"有monsters键吗? "</span> <span class="token operator">..</span> <span class="token function">tostring</span><span class="token punctuation">(</span>game_data<span class="token punctuation">.</span>monsters <span class="token operator">~=</span> <span class="token keyword">nil</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">-- false</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h4"><h4 data-heading="使用逻辑运算符安全的访问表" dir="auto" class="heading" id="使用逻辑运算符安全的访问表_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>使用逻辑运算符安全的访问表</h4></div><div class="el-pre"><pre class="language-lua"><code data-line="0" class="language-lua is-loaded"><span class="token comment">-- 注意：表中不存在的键值对都是 nil</span>
<span class="token comment">-- 使用 game_data.players[1] 如果没有 game_data.players 将会报错，因为 game_data.players 是 nil，nil 无法索引</span>

<span class="token comment">-- 安全的访问方式：使用逻辑运算符短路求值，如果判断到不存在的键直接停止后续逻辑运算</span>
<span class="token keyword">local</span> player_name <span class="token operator">=</span> game_data<span class="token punctuation">.</span>players <span class="token keyword">and</span> game_data<span class="token punctuation">.</span>players<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">and</span> game_data<span class="token punctuation">.</span>players<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"第一个玩家: "</span> <span class="token operator">..</span> <span class="token punctuation">(</span>player_name <span class="token keyword">or</span> <span class="token string">"未知"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h3"><h3 data-heading="7.3.5 表的长度运算符符" dir="auto" class="heading" id="7.3.5_表的长度运算符符_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>7.3.5 表的长度运算符符</h3></div><div class="el-pre"><pre class="language-lua"><code data-line="0" class="language-lua is-loaded"><span class="token comment">-- #操作符用于获取表的数组部分的长度</span>
<span class="token comment">-- 注意：它只在数组部分是连续的且从1开始时才准确</span>

<span class="token comment">-- 连续数组</span>
<span class="token keyword">local</span> arr1 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"arr1长度: "</span> <span class="token operator">..</span> <span class="token operator">#</span>arr1<span class="token punctuation">)</span>  <span class="token comment">-- 5</span>

<span class="token comment">-- 有"洞"的数组</span>
<span class="token keyword">local</span> arr2 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">nil</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"arr2长度（有洞）: "</span> <span class="token operator">..</span> <span class="token operator">#</span>arr2<span class="token punctuation">)</span>  <span class="token comment">-- 1（遇到第一个nil就停止）</span>

<span class="token keyword">local</span> arr3 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span>
arr3<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">5</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"arr3长度（不连续）: "</span> <span class="token operator">..</span> <span class="token operator">#</span>arr3<span class="token punctuation">)</span>  <span class="token comment">-- 3（只计算连续部分）</span>

<span class="token comment">-- 字典部分不影响长度</span>
<span class="token keyword">local</span> mixed <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token string">"b"</span><span class="token punctuation">,</span> <span class="token string">"c"</span><span class="token punctuation">,</span>
    name <span class="token operator">=</span> <span class="token string">"测试"</span><span class="token punctuation">,</span>
    value <span class="token operator">=</span> <span class="token number">100</span>
<span class="token punctuation">}</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"mixed长度: "</span> <span class="token operator">..</span> <span class="token operator">#</span>mixed<span class="token punctuation">)</span>  <span class="token comment">-- 3（只计算数组部分）</span>

<span class="token comment">-- 安全获取表长度的方法</span>
<span class="token keyword">function</span> <span class="token function">table_length</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>
    <span class="token keyword">local</span> count <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token keyword">do</span>
        count <span class="token operator">=</span> count <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token keyword">end</span>
    <span class="token keyword">return</span> count
<span class="token keyword">end</span>

<span class="token keyword">local</span> test_table <span class="token operator">=</span> <span class="token punctuation">{</span>a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> c <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span> d <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">}</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"表总元素数: "</span> <span class="token operator">..</span> <span class="token function">table_length</span><span class="token punctuation">(</span>test_table<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">-- 4</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"数组长度操作符: "</span> <span class="token operator">..</span> <span class="token operator">#</span>test_table<span class="token punctuation">)</span>          <span class="token comment">-- 0（没有数组部分）</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h4"><h4 data-heading="示例" dir="auto" class="heading" id="示例_2"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>示例</h4></div><div class="el-pre"><pre class="language-lua"><code data-line="0" class="language-lua is-loaded"><span class="token comment">-- 实际应用：统计玩家数量</span>
<span class="token keyword">local</span> players <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">{</span>name <span class="token operator">=</span> <span class="token string">"玩家1"</span><span class="token punctuation">,</span> ready <span class="token operator">=</span> <span class="token keyword">true</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>name <span class="token operator">=</span> <span class="token string">"玩家2"</span><span class="token punctuation">,</span> ready <span class="token operator">=</span> <span class="token keyword">false</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>name <span class="token operator">=</span> <span class="token string">"玩家3"</span><span class="token punctuation">,</span> ready <span class="token operator">=</span> <span class="token keyword">true</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>name <span class="token operator">=</span> <span class="token string">"玩家4"</span><span class="token punctuation">,</span> ready <span class="token operator">=</span> <span class="token keyword">true</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"玩家总数: "</span> <span class="token operator">..</span> <span class="token operator">#</span>players<span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"就绪玩家数: "</span> <span class="token operator">..</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">local</span> count <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">for</span> _<span class="token punctuation">,</span> player <span class="token keyword">in</span> <span class="token function">ipairs</span><span class="token punctuation">(</span>players<span class="token punctuation">)</span> <span class="token keyword">do</span>
        <span class="token keyword">if</span> player<span class="token punctuation">.</span>ready <span class="token keyword">then</span>
            count <span class="token operator">=</span> count <span class="token operator">+</span> <span class="token number">1</span>
        <span class="token keyword">end</span>
    <span class="token keyword">end</span>
    <span class="token keyword">return</span> count
<span class="token keyword">end</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h2"><h2 data-heading="7.4 表遍历" dir="auto" class="heading" id="7.4_表遍历_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>7.4 表遍历</h2></div><div class="el-h3"><h3 data-heading="7.4.1 ipairs - 遍历数组部分" dir="auto" class="heading" id="7.4.1_ipairs_-_遍历数组部分_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>7.4.1 ipairs - 遍历数组部分</h3></div><div class="el-pre"><pre class="language-lua"><code data-line="0" class="language-lua is-loaded"><span class="token comment">-- ipairs用于遍历数组部分（索引从1开始，连续）</span>
<span class="token keyword">local</span> colors <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"红色"</span><span class="token punctuation">,</span> <span class="token string">"绿色"</span><span class="token punctuation">,</span> <span class="token string">"蓝色"</span><span class="token punctuation">,</span> <span class="token string">"黄色"</span><span class="token punctuation">,</span> <span class="token string">"紫色"</span><span class="token punctuation">}</span>

<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"使用ipairs遍历:"</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> index<span class="token punctuation">,</span> color <span class="token keyword">in</span> <span class="token function">ipairs</span><span class="token punctuation">(</span>colors<span class="token punctuation">)</span> <span class="token keyword">do</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"  颜色"</span> <span class="token operator">..</span> index <span class="token operator">..</span> <span class="token string">": "</span> <span class="token operator">..</span> color<span class="token punctuation">)</span>
<span class="token keyword">end</span>

<span class="token comment">-- ipairs在遇到nil时会停止</span>
<span class="token keyword">local</span> with_holes <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"第一"</span><span class="token punctuation">,</span> <span class="token keyword">nil</span><span class="token punctuation">,</span> <span class="token string">"第三"</span><span class="token punctuation">,</span> <span class="token string">"第四"</span><span class="token punctuation">}</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"\n有洞的数组，ipairs遍历:"</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> i<span class="token punctuation">,</span> v <span class="token keyword">in</span> <span class="token function">ipairs</span><span class="token punctuation">(</span>with_holes<span class="token punctuation">)</span> <span class="token keyword">do</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"  "</span> <span class="token operator">..</span> i <span class="token operator">..</span> <span class="token string">": "</span> <span class="token operator">..</span> v<span class="token punctuation">)</span>
<span class="token keyword">end</span>
<span class="token comment">-- 只会输出: 1: 第一</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h4"><h4 data-heading="示例" dir="auto" class="heading" id="示例_3"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>示例</h4></div><div class="el-pre"><pre class="language-lua"><code data-line="0" class="language-lua is-loaded"><span class="token comment">-- 实际游戏示例：遍历技能列表</span>
<span class="token keyword">local</span> skills <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">{</span>name <span class="token operator">=</span> <span class="token string">"火球术"</span><span class="token punctuation">,</span> damage <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">,</span> mana_cost <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>name <span class="token operator">=</span> <span class="token string">"治疗术"</span><span class="token punctuation">,</span> heal <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">,</span> mana_cost <span class="token operator">=</span> <span class="token number">15</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>name <span class="token operator">=</span> <span class="token string">"冰箭术"</span><span class="token punctuation">,</span> damage <span class="token operator">=</span> <span class="token number">25</span><span class="token punctuation">,</span> mana_cost <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">,</span> slow <span class="token operator">=</span> <span class="token keyword">true</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"\n技能列表:"</span><span class="token punctuation">)</span>

<span class="token keyword">for</span> i<span class="token punctuation">,</span> skill <span class="token keyword">in</span> <span class="token function">ipairs</span><span class="token punctuation">(</span>skills<span class="token punctuation">)</span> <span class="token keyword">do</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"  技能"</span> <span class="token operator">..</span> i <span class="token operator">..</span> <span class="token string">": "</span> <span class="token operator">..</span> skill<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
    <span class="token keyword">if</span> skill<span class="token punctuation">.</span>damage <span class="token keyword">then</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"    伤害: "</span> <span class="token operator">..</span> skill<span class="token punctuation">.</span>damage<span class="token punctuation">)</span>
    <span class="token keyword">end</span>
    <span class="token keyword">if</span> skill<span class="token punctuation">.</span>heal <span class="token keyword">then</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"    治疗: "</span> <span class="token operator">..</span> skill<span class="token punctuation">.</span>heal<span class="token punctuation">)</span>
    <span class="token keyword">end</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"    消耗法力: "</span> <span class="token operator">..</span> skill<span class="token punctuation">.</span>mana_cost<span class="token punctuation">)</span>
<span class="token keyword">end</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h3"><h3 data-heading="7.4.2 pairs - 遍历所有元素" dir="auto" class="heading" id="7.4.2_pairs_-_遍历所有元素_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>7.4.2 pairs - 遍历所有元素</h3></div><div class="el-pre"><pre class="language-lua"><code data-line="0" class="language-lua is-loaded"><span class="token comment">-- pairs遍历表的所有键值对（包括数组和字典部分）</span>
<span class="token keyword">local</span> student <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">"小明"</span><span class="token punctuation">,</span>                <span class="token comment">-- 数组部分，索引1</span>
    age <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">,</span>              <span class="token comment">-- 字典部分</span>
    grade <span class="token operator">=</span> <span class="token string">"高三"</span><span class="token punctuation">,</span>        <span class="token comment">-- 字典部分</span>
    <span class="token string">"男"</span><span class="token punctuation">,</span>                  <span class="token comment">-- 数组部分，索引2</span>
    <span class="token punctuation">[</span><span class="token string">"出生日期"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"2005-03-15"</span>  <span class="token comment">-- 字典部分</span>
<span class="token punctuation">}</span>

<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"使用pairs遍历:"</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> key<span class="token punctuation">,</span> value <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>student<span class="token punctuation">)</span> <span class="token keyword">do</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"  "</span> <span class="token operator">..</span> <span class="token function">tostring</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token operator">..</span> <span class="token string">": "</span> <span class="token operator">..</span> <span class="token function">tostring</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">end</span>
<span class="token comment">-- 注意：pairs的遍历顺序是无序的！</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h4"><h4 data-heading="对比ipairs和pairs" dir="auto" class="heading" id="对比ipairs和pairs_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>对比ipairs和pairs</h4></div><div class="el-pre"><pre class="language-lua"><code data-line="0" class="language-lua is-loaded"><span class="token keyword">local</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">"第一个"</span><span class="token punctuation">,</span>
    <span class="token string">"第二个"</span><span class="token punctuation">,</span>
    key1 <span class="token operator">=</span> <span class="token string">"值1"</span><span class="token punctuation">,</span>
    <span class="token string">"第三个"</span><span class="token punctuation">,</span>
    key2 <span class="token operator">=</span> <span class="token string">"值2"</span>
<span class="token punctuation">}</span>

<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"\n使用ipairs遍历:"</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> i<span class="token punctuation">,</span> v <span class="token keyword">in</span> <span class="token function">ipairs</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token keyword">do</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"  "</span> <span class="token operator">..</span> i <span class="token operator">..</span> <span class="token string">": "</span> <span class="token operator">..</span> v<span class="token punctuation">)</span>  <span class="token comment">-- 只输出数组部分：1,2,3</span>
<span class="token keyword">end</span>

<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"\n使用pairs遍历:"</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token keyword">do</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"  "</span> <span class="token operator">..</span> <span class="token function">tostring</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span> <span class="token operator">..</span> <span class="token string">": "</span> <span class="token operator">..</span> <span class="token function">tostring</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">-- 输出所有键值对</span>
<span class="token keyword">end</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h4"><h4 data-heading="示例" dir="auto" class="heading" id="示例_4"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>示例</h4></div><div class="el-pre"><pre class="language-lua"><code data-line="0" class="language-lua is-loaded"><span class="token comment">-- 实际应用：遍历物品栏</span>
<span class="token keyword">local</span> inventory <span class="token operator">=</span> <span class="token punctuation">{</span>
    gold <span class="token operator">=</span> <span class="token number">150</span><span class="token punctuation">,</span>
    silver <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token string">"生命药水"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token string">"魔法药水"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span>
    weapons <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"木剑"</span><span class="token punctuation">,</span> <span class="token string">"铁盾"</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"\n物品栏内容:"</span><span class="token punctuation">)</span>

<span class="token keyword">for</span> item<span class="token punctuation">,</span> amount <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>inventory<span class="token punctuation">)</span> <span class="token keyword">do</span>
    <span class="token keyword">if</span> <span class="token function">type</span><span class="token punctuation">(</span>amount<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">"number"</span> <span class="token keyword">then</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"  "</span> <span class="token operator">..</span> item <span class="token operator">..</span> <span class="token string">": "</span> <span class="token operator">..</span> amount<span class="token punctuation">)</span>
    <span class="token keyword">elseif</span> <span class="token function">type</span><span class="token punctuation">(</span>amount<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">"table"</span> <span class="token keyword">then</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"  "</span> <span class="token operator">..</span> item <span class="token operator">..</span> <span class="token string">":"</span><span class="token punctuation">)</span>
        
        <span class="token keyword">for</span> i<span class="token punctuation">,</span> weapon <span class="token keyword">in</span> <span class="token function">ipairs</span><span class="token punctuation">(</span>amount<span class="token punctuation">)</span> <span class="token keyword">do</span>
            <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"    "</span> <span class="token operator">..</span> i <span class="token operator">..</span> <span class="token string">". "</span> <span class="token operator">..</span> weapon<span class="token punctuation">)</span>
        <span class="token keyword">end</span>
    <span class="token keyword">end</span>
<span class="token keyword">end</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h3"><h3 data-heading="7.4.3 自定义遍历顺序" dir="auto" class="heading" id="7.4.3_自定义遍历顺序_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>7.4.3 自定义遍历顺序</h3></div><div class="el-pre"><pre class="language-lua"><code data-line="0" class="language-lua is-loaded"><span class="token comment">-- 由于 pairs 遍历顺序不确定，有时我们需要特定顺序</span>
<span class="token keyword">local</span> scores <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token string">"小明"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">85</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token string">"小红"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">92</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token string">"小刚"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">78</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token string">"李雷"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">88</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token string">"韩梅梅"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">95</span>
<span class="token punctuation">}</span>

<span class="token comment">-- 方法1：先收集键，然后排序</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"按名字排序输出:"</span><span class="token punctuation">)</span>

<span class="token keyword">local</span> keys <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">for</span> name <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>scores<span class="token punctuation">)</span> <span class="token keyword">do</span>
    table<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>keys<span class="token punctuation">,</span> name<span class="token punctuation">)</span>
<span class="token keyword">end</span>

table<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>keys<span class="token punctuation">)</span>  <span class="token comment">-- 按字母顺序排序</span>

<span class="token keyword">for</span> _<span class="token punctuation">,</span> name <span class="token keyword">in</span> <span class="token function">ipairs</span><span class="token punctuation">(</span>keys<span class="token punctuation">)</span> <span class="token keyword">do</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"  "</span> <span class="token operator">..</span> name <span class="token operator">..</span> <span class="token string">": "</span> <span class="token operator">..</span> scores<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">end</span>

<span class="token comment">-- 方法2：按分数排序</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"\n按分数从高到低排序:"</span><span class="token punctuation">)</span>
<span class="token keyword">local</span> entries <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">for</span> name<span class="token punctuation">,</span> score <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>scores<span class="token punctuation">)</span> <span class="token keyword">do</span>
    table<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>entries<span class="token punctuation">,</span> <span class="token punctuation">{</span>name <span class="token operator">=</span> name<span class="token punctuation">,</span> score <span class="token operator">=</span> score<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">end</span>

<span class="token comment">-- 自定义排序函数</span>
table<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>entries<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span>
    <span class="token keyword">return</span> a<span class="token punctuation">.</span>score <span class="token operator">&gt;</span> b<span class="token punctuation">.</span>score  <span class="token comment">-- 降序排列</span>
<span class="token keyword">end</span><span class="token punctuation">)</span>

<span class="token keyword">for</span> i<span class="token punctuation">,</span> entry <span class="token keyword">in</span> <span class="token function">ipairs</span><span class="token punctuation">(</span>entries<span class="token punctuation">)</span> <span class="token keyword">do</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"  "</span> <span class="token operator">..</span> i <span class="token operator">..</span> <span class="token string">". "</span> <span class="token operator">..</span> entry<span class="token punctuation">.</span>name <span class="token operator">..</span> <span class="token string">": "</span> <span class="token operator">..</span> entry<span class="token punctuation">.</span>score<span class="token punctuation">)</span>
<span class="token keyword">end</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h4"><h4 data-heading="示例" dir="auto" class="heading" id="示例_5"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>示例</h4></div><div class="el-pre"><pre class="language-lua"><code data-line="0" class="language-lua is-loaded"><span class="token comment">-- 实际应用：游戏排行榜</span>
<span class="token keyword">local</span> leaderboard <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">{</span>name <span class="token operator">=</span> <span class="token string">"Player1"</span><span class="token punctuation">,</span> score <span class="token operator">=</span> <span class="token number">15000</span><span class="token punctuation">,</span> time <span class="token operator">=</span> <span class="token number">360</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>name <span class="token operator">=</span> <span class="token string">"Player2"</span><span class="token punctuation">,</span> score <span class="token operator">=</span> <span class="token number">12000</span><span class="token punctuation">,</span> time <span class="token operator">=</span> <span class="token number">420</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>name <span class="token operator">=</span> <span class="token string">"Player3"</span><span class="token punctuation">,</span> score <span class="token operator">=</span> <span class="token number">18000</span><span class="token punctuation">,</span> time <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>name <span class="token operator">=</span> <span class="token string">"Player4"</span><span class="token punctuation">,</span> score <span class="token operator">=</span> <span class="token number">9000</span><span class="token punctuation">,</span> time <span class="token operator">=</span> <span class="token number">500</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">-- 按分数降序，分数相同时按时间升序</span>
table<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>leaderboard<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span>
    <span class="token keyword">if</span> a<span class="token punctuation">.</span>score <span class="token operator">==</span> b<span class="token punctuation">.</span>score <span class="token keyword">then</span>
        <span class="token keyword">return</span> a<span class="token punctuation">.</span>time <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>time  <span class="token comment">-- 时间少的排在前面</span>
    <span class="token keyword">end</span>
    
    <span class="token keyword">return</span> a<span class="token punctuation">.</span>score <span class="token operator">&gt;</span> b<span class="token punctuation">.</span>score  <span class="token comment">-- 分数高的排在前面</span>
<span class="token keyword">end</span><span class="token punctuation">)</span>

<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"\n游戏排行榜:"</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> rank<span class="token punctuation">,</span> player <span class="token keyword">in</span> <span class="token function">ipairs</span><span class="token punctuation">(</span>leaderboard<span class="token punctuation">)</span> <span class="token keyword">do</span>
    <span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"  第%d名: %s (分数: %d, 时间: %d秒)"</span><span class="token punctuation">,</span> 
          rank<span class="token punctuation">,</span> player<span class="token punctuation">.</span>name<span class="token punctuation">,</span> player<span class="token punctuation">.</span>score<span class="token punctuation">,</span> player<span class="token punctuation">.</span>time<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">end</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h2"><h2 data-heading="7.5 表相关函数" dir="auto" class="heading" id="7.5_表相关函数_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>7.5 表相关函数</h2></div><div class="el-p"><p dir="auto">Lua 提供了几个内置函数来操作表。</p></div><div class="el-h3"><h3 data-heading="7.5.1 table.concat - 连接为字符串" dir="auto" class="heading" id="7.5.1_table.concat_-_连接为字符串_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>7.5.1 table.concat - 连接为字符串</h3></div><div class="el-pre"><pre class="language-lua"><code data-line="0" class="language-lua is-loaded">table<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>列表<span class="token punctuation">:</span> list<span class="token punctuation">,</span> 分隔符?<span class="token punctuation">:</span> str<span class="token punctuation">,</span> 起始位置?<span class="token punctuation">:</span> int<span class="token punctuation">,</span> 结束位置?<span class="token punctuation">:</span> int<span class="token punctuation">)</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>不指定分隔符则直接进行连接</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>不指定起始位置与结束位置默认连接所有元素</li>
</ul></div><div class="el-h4"><h4 data-heading="示例" dir="auto" class="heading" id="示例_6"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>示例</h4></div><div class="el-pre"><pre class="language-lua"><code data-line="0" class="language-lua is-loaded"><span class="token comment">-- table.concat用于连接数组部分的元素</span>
<span class="token keyword">local</span> words <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"Hello"</span><span class="token punctuation">,</span> <span class="token string">"Lua"</span><span class="token punctuation">,</span> <span class="token string">"World"</span><span class="token punctuation">,</span> <span class="token string">"!"</span><span class="token punctuation">}</span>

<span class="token comment">-- 简单连接</span>
<span class="token keyword">local</span> sentence <span class="token operator">=</span> table<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>words<span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"简单连接: "</span> <span class="token operator">..</span> sentence<span class="token punctuation">)</span>  <span class="token comment">-- HelloLuaWorld!</span>

<span class="token comment">-- 用分隔符连接</span>
sentence <span class="token operator">=</span> table<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>words<span class="token punctuation">,</span> <span class="token string">" "</span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"空格分隔: "</span> <span class="token operator">..</span> sentence<span class="token punctuation">)</span>  <span class="token comment">-- Hello Lua World !</span>

<span class="token comment">-- 指定起始和结束位置</span>
sentence <span class="token operator">=</span> table<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>words<span class="token punctuation">,</span> <span class="token string">", "</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"部分连接: "</span> <span class="token operator">..</span> sentence<span class="token punctuation">)</span>  <span class="token comment">-- Lua, World</span>

<span class="token comment">-- 实际应用：构建路径</span>
<span class="token keyword">local</span> path_parts <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"home"</span><span class="token punctuation">,</span> <span class="token string">"user"</span><span class="token punctuation">,</span> <span class="token string">"projects"</span><span class="token punctuation">,</span> <span class="token string">"lua"</span><span class="token punctuation">,</span> <span class="token string">"main.lua"</span><span class="token punctuation">}</span>
<span class="token keyword">local</span> path <span class="token operator">=</span> table<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>path_parts<span class="token punctuation">,</span> <span class="token string">"/"</span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"文件路径: "</span> <span class="token operator">..</span> path<span class="token punctuation">)</span>  <span class="token comment">-- home/user/projects/lua/main.lua</span>

<span class="token comment">-- 构建SQL查询条件</span>
<span class="token keyword">local</span> conditions <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"age &gt; 18"</span><span class="token punctuation">,</span> <span class="token string">"status = 'active'"</span><span class="token punctuation">,</span> <span class="token string">"score &gt;= 60"</span><span class="token punctuation">}</span>
<span class="token keyword">local</span> where_clause <span class="token operator">=</span> table<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>conditions<span class="token punctuation">,</span> <span class="token string">" AND "</span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"SQL条件: WHERE "</span> <span class="token operator">..</span> where_clause<span class="token punctuation">)</span>

<span class="token comment">-- 构建HTML列表</span>
<span class="token keyword">local</span> items <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"苹果"</span><span class="token punctuation">,</span> <span class="token string">"香蕉"</span><span class="token punctuation">,</span> <span class="token string">"橙子"</span><span class="token punctuation">}</span>
<span class="token keyword">local</span> html_list <span class="token operator">=</span> <span class="token string">"&lt;ul&gt;\n"</span>
<span class="token keyword">for</span> i<span class="token punctuation">,</span> item <span class="token keyword">in</span> <span class="token function">ipairs</span><span class="token punctuation">(</span>items<span class="token punctuation">)</span> <span class="token keyword">do</span>
    html_list <span class="token operator">=</span> html_list <span class="token operator">..</span> <span class="token string">"  &lt;li&gt;"</span> <span class="token operator">..</span> item <span class="token operator">..</span> <span class="token string">"&lt;/li&gt;\n"</span>
<span class="token keyword">end</span>
html_list <span class="token operator">=</span> html_list <span class="token operator">..</span> <span class="token string">"&lt;/ul&gt;"</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"\nHTML列表:\n"</span> <span class="token operator">..</span> html_list<span class="token punctuation">)</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h3"><h3 data-heading="7.5.2 table.sort - 排序" dir="auto" class="heading" id="7.5.2_table.sort_-_排序_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>7.5.2 table.sort - 排序</h3></div><div class="el-h4"><h4 data-heading="语法" dir="auto" class="heading" id="语法_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>语法</h4></div><div class="el-pre"><pre class="language-lua"><code data-line="0" class="language-lua is-loaded">table<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>单结构表<span class="token punctuation">:</span> list<span class="token operator">|</span>dict<span class="token punctuation">,</span> 匿名函数?<span class="token punctuation">:</span> func<span class="token punctuation">)</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>不指定匿名函数则对于字符串将会以字母升序排序，数字以大小升序排序</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>为匿名函数传递比较的两个值，匿名函数必须返回布尔值，为真排序在前，为假排序在后</li>
</ul></div><div class="el-h4"><h4 data-heading="示例" dir="auto" class="heading" id="示例_7"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>示例</h4></div><div class="el-pre"><pre class="language-lua"><code data-line="0" class="language-lua is-loaded"><span class="token comment">-- table.sort用于对数组部分进行排序</span>
<span class="token keyword">local</span> numbers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span>

<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"原始数组: "</span> <span class="token operator">..</span> table<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>numbers<span class="token punctuation">,</span> <span class="token string">", "</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">-- 默认排序（升序）</span>
table<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>numbers<span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"升序排序: "</span> <span class="token operator">..</span> table<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>numbers<span class="token punctuation">,</span> <span class="token string">", "</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">-- 降序排序</span>
table<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>numbers<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span>
    <span class="token keyword">return</span> a <span class="token operator">&gt;</span> b
<span class="token keyword">end</span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"降序排序: "</span> <span class="token operator">..</span> table<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>numbers<span class="token punctuation">,</span> <span class="token string">", "</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">--[[ 输出
原始数组: 5, 2, 8, 1, 9, 3
升序排序: 1, 2, 3, 5, 8, 9
降序排序: 9, 8, 5, 3, 2, 1
--]]</span>

<span class="token comment">-- 字符串排序</span>
<span class="token keyword">local</span> letter <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">"b"</span><span class="token punctuation">,</span> <span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token string">"c"</span><span class="token punctuation">,</span> <span class="token string">"y"</span><span class="token punctuation">,</span> <span class="token string">"z"</span><span class="token punctuation">,</span> <span class="token string">"x"</span> <span class="token punctuation">}</span>
table<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>letter<span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"\n字母排序: "</span> <span class="token operator">..</span> table<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>letter<span class="token punctuation">,</span> <span class="token string">", "</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">--[[ 输出
字母排序: a, b, c, x, y, z
--]]</span>

<span class="token comment">-- 复杂数据排序</span>
<span class="token keyword">local</span> students <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">{</span>name <span class="token operator">=</span> <span class="token string">"小明"</span><span class="token punctuation">,</span> score <span class="token operator">=</span> <span class="token number">85</span><span class="token punctuation">,</span> age <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>name <span class="token operator">=</span> <span class="token string">"小红"</span><span class="token punctuation">,</span> score <span class="token operator">=</span> <span class="token number">92</span><span class="token punctuation">,</span> age <span class="token operator">=</span> <span class="token number">17</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>name <span class="token operator">=</span> <span class="token string">"小刚"</span><span class="token punctuation">,</span> score <span class="token operator">=</span> <span class="token number">78</span><span class="token punctuation">,</span> age <span class="token operator">=</span> <span class="token number">19</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>name <span class="token operator">=</span> <span class="token string">"李雷"</span><span class="token punctuation">,</span> score <span class="token operator">=</span> <span class="token number">85</span><span class="token punctuation">,</span> age <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">-- 按分数降序，分数相同时按名字升序</span>
table<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>students<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span>
    <span class="token keyword">if</span> a<span class="token punctuation">.</span>score <span class="token operator">==</span> b<span class="token punctuation">.</span>score <span class="token keyword">then</span>
        <span class="token keyword">return</span> a<span class="token punctuation">.</span>name <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>name
    <span class="token keyword">end</span>
    
    <span class="token keyword">return</span> a<span class="token punctuation">.</span>score <span class="token operator">&gt;</span> b<span class="token punctuation">.</span>score
<span class="token keyword">end</span><span class="token punctuation">)</span>

<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"\n学生排名:"</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> i<span class="token punctuation">,</span> student <span class="token keyword">in</span> <span class="token function">ipairs</span><span class="token punctuation">(</span>students<span class="token punctuation">)</span> <span class="token keyword">do</span>
    <span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"  第%d名: %s (分数: %d, 年龄: %d)"</span><span class="token punctuation">,</span> 
          i<span class="token punctuation">,</span> student<span class="token punctuation">.</span>name<span class="token punctuation">,</span> student<span class="token punctuation">.</span>score<span class="token punctuation">,</span> student<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">end</span>

<span class="token comment">-- 自定义排序：按字符串长度</span>
<span class="token keyword">local</span> words <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"apple"</span><span class="token punctuation">,</span> <span class="token string">"banana"</span><span class="token punctuation">,</span> <span class="token string">"cat"</span><span class="token punctuation">,</span> <span class="token string">"elephant"</span><span class="token punctuation">,</span> <span class="token string">"dog"</span><span class="token punctuation">}</span>

table<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>words<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token operator">#</span>a <span class="token operator">&lt;</span> <span class="token operator">#</span>b  <span class="token comment">-- 按长度升序</span>
<span class="token keyword">end</span><span class="token punctuation">)</span>

<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"\n按长度排序: "</span> <span class="token operator">..</span> table<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>words<span class="token punctuation">,</span> <span class="token string">", "</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h2"><h2 data-heading="7.6 表的高级用法" dir="auto" class="heading" id="7.6_表的高级用法_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>7.6 表的高级用法</h2></div><div class="el-h3"><h3 data-heading="7.6.1 表的复制" dir="auto" class="heading" id="7.6.1_表的复制_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>7.6.1 表的复制</h3></div><div class="el-h4"><h4 data-heading="浅复制（浅拷贝）" dir="auto" class="heading" id="浅复制（浅拷贝）_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>浅复制（浅拷贝）</h4></div><div class="el-pre"><pre class="language-lua"><code data-line="0" class="language-lua is-loaded"><span class="token comment">-- 浅拷贝（只复制一层）</span>
<span class="token keyword">local</span> <span class="token keyword">function</span> <span class="token function">shallow_copy</span><span class="token punctuation">(</span>original<span class="token punctuation">)</span>
    <span class="token keyword">local</span> copy <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    
    <span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>original<span class="token punctuation">)</span> <span class="token keyword">do</span>
        copy<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> v
    <span class="token keyword">end</span>
    
    <span class="token keyword">return</span> copy
<span class="token keyword">end</span>

<span class="token comment">-- 测试复制</span>
<span class="token keyword">local</span> original <span class="token operator">=</span> <span class="token punctuation">{</span>
    name <span class="token operator">=</span> <span class="token string">"原始表"</span><span class="token punctuation">,</span>
    data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    nested <span class="token operator">=</span> <span class="token punctuation">{</span>
        a <span class="token operator">=</span> <span class="token string">"A"</span><span class="token punctuation">,</span>
        b <span class="token operator">=</span> <span class="token punctuation">{</span>x <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">local</span> shallow <span class="token operator">=</span> <span class="token function">shallow_copy</span><span class="token punctuation">(</span>original<span class="token punctuation">)</span>

<span class="token comment">-- 修改原表</span>
original<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"修改后的原表"</span>
original<span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">100</span>
original<span class="token punctuation">.</span>nested<span class="token punctuation">.</span>b<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">999</span>

<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"浅复制测试:"</span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"  原表.name: "</span> <span class="token operator">..</span> original<span class="token punctuation">.</span>name<span class="token punctuation">)</span>  <span class="token comment">-- 修改后的原表</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"  浅复制.name: "</span> <span class="token operator">..</span> shallow<span class="token punctuation">.</span>name<span class="token punctuation">)</span>  <span class="token comment">-- 原始表（字符串被复制）</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"  原表.data[1]: "</span> <span class="token operator">..</span> original<span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment">-- 100</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"  浅复制.data[1]: "</span> <span class="token operator">..</span> shallow<span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment">-- 100（表是引用！）</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h4"><h4 data-heading="深复制（深拷贝）" dir="auto" class="heading" id="深复制（深拷贝）_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>深复制（深拷贝）</h4></div><div class="el-pre"><pre class="language-lua"><code data-line="0" class="language-lua is-loaded"><span class="token comment">-- 深复制（复制所有嵌套结构）</span>
<span class="token keyword">local</span> <span class="token keyword">function</span> <span class="token function">deep_copy</span><span class="token punctuation">(</span>original<span class="token punctuation">,</span> seen<span class="token punctuation">)</span>
    seen <span class="token operator">=</span> seen <span class="token keyword">or</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    
    <span class="token keyword">if</span> <span class="token function">type</span><span class="token punctuation">(</span>original<span class="token punctuation">)</span> <span class="token operator">~=</span> <span class="token string">"table"</span> <span class="token keyword">then</span>
        <span class="token keyword">return</span> original
    <span class="token keyword">end</span>
    
    <span class="token keyword">if</span> seen<span class="token punctuation">[</span>original<span class="token punctuation">]</span> <span class="token keyword">then</span>
        <span class="token keyword">return</span> seen<span class="token punctuation">[</span>original<span class="token punctuation">]</span>
    <span class="token keyword">end</span>
    
    <span class="token keyword">local</span> copy <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    seen<span class="token punctuation">[</span>original<span class="token punctuation">]</span> <span class="token operator">=</span> copy
    
    <span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>original<span class="token punctuation">)</span> <span class="token keyword">do</span>
        copy<span class="token punctuation">[</span><span class="token function">deep_copy</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> seen<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">deep_copy</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> seen<span class="token punctuation">)</span>
    <span class="token keyword">end</span>
    
    <span class="token keyword">return</span> copy
<span class="token keyword">end</span>

<span class="token comment">-- 测试复制</span>
<span class="token keyword">local</span> original <span class="token operator">=</span> <span class="token punctuation">{</span>
    name <span class="token operator">=</span> <span class="token string">"原始表"</span><span class="token punctuation">,</span>
    data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    nested <span class="token operator">=</span> <span class="token punctuation">{</span>
        a <span class="token operator">=</span> <span class="token string">"A"</span><span class="token punctuation">,</span>
        b <span class="token operator">=</span> <span class="token punctuation">{</span>x <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">local</span> deep <span class="token operator">=</span> <span class="token function">deep_copy</span><span class="token punctuation">(</span>original<span class="token punctuation">)</span>

<span class="token comment">-- 修改原表</span>
original<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"修改后的原表"</span>
original<span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">100</span>
original<span class="token punctuation">.</span>nested<span class="token punctuation">.</span>b<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">999</span>

<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"\n深复制测试:"</span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"  深复制.name: "</span> <span class="token operator">..</span> deep<span class="token punctuation">.</span>name<span class="token punctuation">)</span>  <span class="token comment">-- 原始表</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"  深复制.data[1]: "</span> <span class="token operator">..</span> deep<span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment">-- 1（独立副本）</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"  深复制.nested.b.x: "</span> <span class="token operator">..</span> deep<span class="token punctuation">.</span>nested<span class="token punctuation">.</span>b<span class="token punctuation">.</span>x<span class="token punctuation">)</span>  <span class="token comment">-- 10（独立副本）</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h3"><h3 data-heading="7.6.2 表的合并" dir="auto" class="heading" id="7.6.2_表的合并_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>7.6.2 表的合并</h3></div><div class="el-h4"><h4 data-heading="浅合并" dir="auto" class="heading" id="浅合并_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>浅合并</h4></div><div class="el-pre"><pre class="language-lua"><code data-line="0" class="language-lua is-loaded"><span class="token comment">-- 合并两个表（浅合并）</span>
<span class="token keyword">local</span> <span class="token keyword">function</span> <span class="token function">shallow_merge</span><span class="token punctuation">(</span>t1<span class="token punctuation">,</span> t2<span class="token punctuation">)</span>
    <span class="token keyword">local</span> result <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    
    <span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>t1<span class="token punctuation">)</span> <span class="token keyword">do</span>
        result<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> v
    <span class="token keyword">end</span>
    
    <span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>t2<span class="token punctuation">)</span> <span class="token keyword">do</span>
        result<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> v
    <span class="token keyword">end</span>
    
    <span class="token keyword">return</span> result
<span class="token keyword">end</span>

<span class="token comment">-- 测试合并</span>
<span class="token keyword">local</span> defaults <span class="token operator">=</span> <span class="token punctuation">{</span>
    sound <span class="token operator">=</span> <span class="token keyword">true</span><span class="token punctuation">,</span>
    volume <span class="token operator">=</span> <span class="token number">70</span><span class="token punctuation">,</span>
    graphics <span class="token operator">=</span> <span class="token punctuation">{</span>
        quality <span class="token operator">=</span> <span class="token string">"medium"</span><span class="token punctuation">,</span>
        resolution <span class="token operator">=</span> <span class="token string">"1280x720"</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">local</span> user_settings <span class="token operator">=</span> <span class="token punctuation">{</span>
    volume <span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">,</span>
    language <span class="token operator">=</span> <span class="token string">"中文"</span><span class="token punctuation">,</span>
    graphics <span class="token operator">=</span> <span class="token punctuation">{</span>
        resolution <span class="token operator">=</span> <span class="token string">"1920x1080"</span><span class="token punctuation">,</span>
        shadows <span class="token operator">=</span> <span class="token keyword">true</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">local</span> merged <span class="token operator">=</span> <span class="token function">shallow_merge</span><span class="token punctuation">(</span>defaults<span class="token punctuation">,</span> user_settings<span class="token punctuation">)</span>

<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"合并后的设置:"</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>merged<span class="token punctuation">)</span> <span class="token keyword">do</span>
    <span class="token keyword">if</span> <span class="token function">type</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">"table"</span> <span class="token keyword">then</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"  "</span> <span class="token operator">..</span> k <span class="token operator">..</span> <span class="token string">":"</span><span class="token punctuation">)</span>
        
        <span class="token keyword">for</span> k2<span class="token punctuation">,</span> v2 <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token keyword">do</span>
            <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"    "</span> <span class="token operator">..</span> k2 <span class="token operator">..</span> <span class="token string">": "</span> <span class="token operator">..</span> <span class="token function">tostring</span><span class="token punctuation">(</span>v2<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">end</span>
    <span class="token keyword">else</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"  "</span> <span class="token operator">..</span> k <span class="token operator">..</span> <span class="token string">": "</span> <span class="token operator">..</span> <span class="token function">tostring</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">end</span>
<span class="token keyword">end</span>
<span class="token comment">--[[ 输出
合并后的设置:
  language: 中文
  volume: 80
  sound: true
  graphics:
    shadows: true
    resolution: 1920x1080
--]]</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h4"><h4 data-heading="深合并" dir="auto" class="heading" id="深合并_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>深合并</h4></div><div class="el-pre"><pre class="language-lua"><code data-line="0" class="language-lua is-loaded"><span class="token comment">-- 深度合并</span>
<span class="token keyword">local</span> <span class="token keyword">function</span> <span class="token function">deep_merge</span><span class="token punctuation">(</span>t1<span class="token punctuation">,</span> t2<span class="token punctuation">)</span>
    <span class="token keyword">local</span> result <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    
    <span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>t1<span class="token punctuation">)</span> <span class="token keyword">do</span>
        result<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> v
    <span class="token keyword">end</span>
    
    <span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>t2<span class="token punctuation">)</span> <span class="token keyword">do</span>
        <span class="token keyword">if</span> <span class="token function">type</span><span class="token punctuation">(</span>result<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">"table"</span> <span class="token keyword">and</span> <span class="token function">type</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">"table"</span> <span class="token keyword">then</span>
            result<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">deep_merge</span><span class="token punctuation">(</span>result<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span>
        <span class="token keyword">else</span>
            result<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> v
        <span class="token keyword">end</span>
    <span class="token keyword">end</span>
    
    <span class="token keyword">return</span> result
<span class="token keyword">end</span>

<span class="token comment">-- 测试合并</span>
<span class="token keyword">local</span> defaults <span class="token operator">=</span> <span class="token punctuation">{</span>
    sound <span class="token operator">=</span> <span class="token keyword">true</span><span class="token punctuation">,</span>
    volume <span class="token operator">=</span> <span class="token number">70</span><span class="token punctuation">,</span>
    graphics <span class="token operator">=</span> <span class="token punctuation">{</span>
        quality <span class="token operator">=</span> <span class="token string">"medium"</span><span class="token punctuation">,</span>
        resolution <span class="token operator">=</span> <span class="token string">"1280x720"</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">local</span> user_settings <span class="token operator">=</span> <span class="token punctuation">{</span>
    volume <span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">,</span>
    language <span class="token operator">=</span> <span class="token string">"中文"</span><span class="token punctuation">,</span>
    graphics <span class="token operator">=</span> <span class="token punctuation">{</span>
        resolution <span class="token operator">=</span> <span class="token string">"1920x1080"</span><span class="token punctuation">,</span>
        shadows <span class="token operator">=</span> <span class="token keyword">true</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">local</span> merged <span class="token operator">=</span> <span class="token function">deep_merge</span><span class="token punctuation">(</span>defaults<span class="token punctuation">,</span> user_settings<span class="token punctuation">)</span>

<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"合并后的设置:"</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>merged<span class="token punctuation">)</span> <span class="token keyword">do</span>
    <span class="token keyword">if</span> <span class="token function">type</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">"table"</span> <span class="token keyword">then</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"  "</span> <span class="token operator">..</span> k <span class="token operator">..</span> <span class="token string">":"</span><span class="token punctuation">)</span>
        
        <span class="token keyword">for</span> k2<span class="token punctuation">,</span> v2 <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token keyword">do</span>
            <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"    "</span> <span class="token operator">..</span> k2 <span class="token operator">..</span> <span class="token string">": "</span> <span class="token operator">..</span> <span class="token function">tostring</span><span class="token punctuation">(</span>v2<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">end</span>
    <span class="token keyword">else</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"  "</span> <span class="token operator">..</span> k <span class="token operator">..</span> <span class="token string">": "</span> <span class="token operator">..</span> <span class="token function">tostring</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">end</span>
<span class="token keyword">end</span>
<span class="token comment">--[[ 输出
合并后的设置:
  language: 中文
  volume: 80
  sound: true
  graphics:
    shadows: true
    quality: medium
    resolution: 1920x1080
--]]</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h3"><h3 data-heading="7.6.3 表作为对象使用" dir="auto" class="heading" id="7.6.3_表作为对象使用_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>7.6.3 表作为对象使用</h3></div><div class="el-h4"><h4 data-heading="示例" dir="auto" class="heading" id="示例_8"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>示例</h4></div><div class="el-pre"><pre class="language-lua"><code data-line="0" class="language-lua is-loaded"><span class="token comment">-- 表可以存储函数，模拟对象</span>
<span class="token keyword">local</span> player <span class="token operator">=</span> <span class="token punctuation">{</span>
    name <span class="token operator">=</span> <span class="token string">"英雄"</span><span class="token punctuation">,</span>
    health <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span>
    level <span class="token operator">=</span> <span class="token number">1</span>
<span class="token punctuation">}</span>

<span class="token comment">-- 添加方法，注意：这里使用冒号定义</span>
<span class="token keyword">function</span> player<span class="token punctuation">:</span><span class="token function">take_damage</span><span class="token punctuation">(</span>amount<span class="token punctuation">)</span>
    self<span class="token punctuation">.</span>health <span class="token operator">=</span> self<span class="token punctuation">.</span>health <span class="token operator">-</span> amount
    
    <span class="token keyword">if</span> self<span class="token punctuation">.</span>health <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token keyword">then</span>
        self<span class="token punctuation">.</span>health <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token function">print</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>name <span class="token operator">..</span> <span class="token string">" 倒下了！"</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span>
        <span class="token function">print</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>name <span class="token operator">..</span> <span class="token string">" 受到 "</span> <span class="token operator">..</span> amount <span class="token operator">..</span> <span class="token string">" 点伤害，剩余生命: "</span> <span class="token operator">..</span> self<span class="token punctuation">.</span>health<span class="token punctuation">)</span>
    <span class="token keyword">end</span>
<span class="token keyword">end</span>
<span class="token comment">-- 以上代码等价于，由于这里是定义到表内的，所以不分局部与全局函数</span>
<span class="token keyword">function</span> player<span class="token punctuation">.</span><span class="token function">take_damage</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> amount<span class="token punctuation">)</span>
    self<span class="token punctuation">.</span>health <span class="token operator">=</span> self<span class="token punctuation">.</span>health <span class="token operator">-</span> amount
    
    <span class="token keyword">if</span> self<span class="token punctuation">.</span>health <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token keyword">then</span>
        self<span class="token punctuation">.</span>health <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token function">print</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>name <span class="token operator">..</span> <span class="token string">" 倒下了！"</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span>
        <span class="token function">print</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>name <span class="token operator">..</span> <span class="token string">" 受到 "</span> <span class="token operator">..</span> amount <span class="token operator">..</span> <span class="token string">" 点伤害，剩余生命: "</span> <span class="token operator">..</span> self<span class="token punctuation">.</span>health<span class="token punctuation">)</span>
    <span class="token keyword">end</span>
<span class="token keyword">end</span>

<span class="token keyword">function</span> player<span class="token punctuation">:</span><span class="token function">heal</span><span class="token punctuation">(</span>amount<span class="token punctuation">)</span>
    self<span class="token punctuation">.</span>health <span class="token operator">=</span> self<span class="token punctuation">.</span>health <span class="token operator">+</span> amount
    <span class="token function">print</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>name <span class="token operator">..</span> <span class="token string">" 恢复了 "</span> <span class="token operator">..</span> amount <span class="token operator">..</span> <span class="token string">" 点生命，当前生命: "</span> <span class="token operator">..</span> self<span class="token punctuation">.</span>health<span class="token punctuation">)</span>
<span class="token keyword">end</span>

<span class="token keyword">function</span> player<span class="token punctuation">:</span><span class="token function">level_up</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    self<span class="token punctuation">.</span>level <span class="token operator">=</span> self<span class="token punctuation">.</span>level <span class="token operator">+</span> <span class="token number">1</span>
    self<span class="token punctuation">.</span>health <span class="token operator">=</span> self<span class="token punctuation">.</span>health <span class="token operator">+</span> <span class="token number">20</span>
    <span class="token function">print</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>name <span class="token operator">..</span> <span class="token string">" 升级到 "</span> <span class="token operator">..</span> self<span class="token punctuation">.</span>level <span class="token operator">..</span> <span class="token string">" 级！"</span><span class="token punctuation">)</span>
<span class="token keyword">end</span>

<span class="token comment">-- 使用冒号调用方法</span>
player<span class="token punctuation">:</span><span class="token function">take_damage</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span>  <span class="token comment">-- 英雄 受到 30 点伤害，剩余生命: 70</span>
player<span class="token punctuation">:</span><span class="token function">heal</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>         <span class="token comment">-- 英雄 恢复了 10 点生命，当前生命: 80</span>
player<span class="token punctuation">:</span><span class="token function">level_up</span><span class="token punctuation">(</span><span class="token punctuation">)</span>       <span class="token comment">-- 英雄 升级到 2 级！</span>
<span class="token comment">-- 以上代码等价于（需要显式传递self）</span>
player<span class="token punctuation">.</span><span class="token function">take_damage</span><span class="token punctuation">(</span>player<span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span>
player<span class="token punctuation">.</span><span class="token function">heal</span><span class="token punctuation">(</span>player<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
player<span class="token punctuation">.</span><span class="token function">level_up</span><span class="token punctuation">(</span>player<span class="token punctuation">)</span>

<span class="token comment">-- 创建多个"实例"</span>
<span class="token keyword">local</span> <span class="token keyword">function</span> <span class="token function">create_player</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
    <span class="token keyword">local</span> new_player <span class="token operator">=</span> <span class="token punctuation">{</span>
        name <span class="token operator">=</span> name<span class="token punctuation">,</span>
        health <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span>
        level <span class="token operator">=</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">-- 使用方法共享（避免每个对象都复制方法）</span>
    new_player<span class="token punctuation">.</span>take_damage <span class="token operator">=</span> player<span class="token punctuation">.</span>take_damage
    new_player<span class="token punctuation">.</span>heal <span class="token operator">=</span> player<span class="token punctuation">.</span>heal
    new_player<span class="token punctuation">.</span>level_up <span class="token operator">=</span> player<span class="token punctuation">.</span>level_up
    
    <span class="token keyword">return</span> new_player
<span class="token keyword">end</span>

<span class="token keyword">local</span> player1 <span class="token operator">=</span> <span class="token function">create_player</span><span class="token punctuation">(</span><span class="token string">"战士"</span><span class="token punctuation">)</span>
<span class="token keyword">local</span> player2 <span class="token operator">=</span> <span class="token function">create_player</span><span class="token punctuation">(</span><span class="token string">"法师"</span><span class="token punctuation">)</span>

player1<span class="token punctuation">:</span><span class="token function">take_damage</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span>  <span class="token comment">-- 战士 受到 40 点伤害，剩余生命: 60</span>
player2<span class="token punctuation">:</span><span class="token function">level_up</span><span class="token punctuation">(</span><span class="token punctuation">)</span>       <span class="token comment">-- 法师 升级到 2 级！</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h4"><h4 data-heading="冒号语法糖" dir="auto" class="heading" id="冒号语法糖_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>冒号语法糖</h4></div><div class="el-p"><p dir="auto">可以使用语法糖 <code>:</code> 冒号来隐式传递 <code>self</code> 参数。</p></div><div class="el-pre"><pre class="language-lua"><code data-line="0" class="language-lua is-loaded"><span class="token comment">-- 定义函数</span>
<span class="token keyword">function</span> player<span class="token punctuation">:</span><span class="token function">take_damage</span><span class="token punctuation">(</span>amount<span class="token punctuation">)</span> <span class="token punctuation">...</span> <span class="token keyword">end</span>
<span class="token comment">-- 这等价于</span>
<span class="token keyword">function</span> player<span class="token punctuation">.</span><span class="token function">take_damage</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> amount<span class="token punctuation">)</span> <span class="token punctuation">...</span> <span class="token keyword">end</span>

<span class="token comment">-- 调用函数</span>
player<span class="token punctuation">:</span><span class="token function">take_damage</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span>
<span class="token comment">-- 这等价于</span>
player<span class="token punctuation">.</span><span class="token function">take_damage</span><span class="token punctuation">(</span>player<span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">)</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h3"><h3 data-heading="7.6.4 元表（Metatable）基础" dir="auto" class="heading" id="7.6.4_元表（Metatable）基础_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>7.6.4 元表（Metatable）基础</h3></div><div class="el-pre"><pre class="language-lua"><code data-line="0" class="language-lua is-loaded"><span class="token comment">-- 元表可以改变表的默认行为</span>
<span class="token comment">-- 这是Lua最强大的特性之一，我们这里先简单介绍</span>

<span class="token comment">-- 实现向量加法</span>
<span class="token comment">-- 创建两个表</span>
<span class="token keyword">local</span> v1 <span class="token operator">=</span> <span class="token punctuation">{</span>x <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">}</span>
<span class="token keyword">local</span> v2 <span class="token operator">=</span> <span class="token punctuation">{</span>x <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">15</span><span class="token punctuation">}</span>

<span class="token comment">-- 默认情况下，表不能直接相加</span>
<span class="token comment">-- print(v1 + v2)  -- 错误：尝试对表进行算术运算</span>

<span class="token comment">-- 创建元表</span>
<span class="token keyword">local</span> mt <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment">-- 定义元表的__add方法（用于加法）</span>
mt<span class="token punctuation">.</span>__add <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        x <span class="token operator">=</span> a<span class="token punctuation">.</span>x <span class="token operator">+</span> b<span class="token punctuation">.</span>x<span class="token punctuation">,</span>
        y <span class="token operator">=</span> a<span class="token punctuation">.</span>y <span class="token operator">+</span> b<span class="token punctuation">.</span>y
    <span class="token punctuation">}</span>
<span class="token keyword">end</span>

<span class="token comment">-- 设置元表</span>
<span class="token function">setmetatable</span><span class="token punctuation">(</span>v1<span class="token punctuation">,</span> mt<span class="token punctuation">)</span>
<span class="token function">setmetatable</span><span class="token punctuation">(</span>v2<span class="token punctuation">,</span> mt<span class="token punctuation">)</span>

<span class="token comment">-- 现在表可以相加了！</span>
<span class="token keyword">local</span> v3 <span class="token operator">=</span> v1 <span class="token operator">+</span> v2
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"v1 + v2 = {x="</span> <span class="token operator">..</span> v3<span class="token punctuation">.</span>x <span class="token operator">..</span> <span class="token string">", y="</span> <span class="token operator">..</span> v3<span class="token punctuation">.</span>y <span class="token operator">..</span> <span class="token string">"}"</span><span class="token punctuation">)</span>  <span class="token comment">-- {x = 15, y = 35}</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h2"><h2 data-heading="7.7 练习" dir="auto" class="heading" id="7.7_练习_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>7.7 练习</h2></div><div class="el-h3"><h3 data-heading="练习 1：简单的联系人管理系统" dir="auto" class="heading" id="练习_1：简单的联系人管理系统_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>练习 1：简单的联系人管理系统</h3></div><div class="el-p"><p dir="auto">（答案见 <a data-href="第 1 节 - 语法/参考答案#练习 7 1：简单的联系人管理系统" href="第-1-节-语法/参考答案.html#练习 7 1：简单的联系人管理系统" class="internal-link" target="_self" rel="noopener nofollow">第 1 节 - 语法/参考答案 &gt; 练习 7 1：简单的联系人管理系统</a>）</p></div><div class="el-pre"><pre class="language-lua"><code data-line="0" class="language-lua is-loaded"><span class="token comment">-- 实现一个简单的联系人管理系统，要求：可增加联系人到通讯录，可读取联系人，可以打印通讯录所有联系人</span>
<span class="token comment">-- 使用示例：</span>
<span class="token comment">-- 测试联系人管理系统</span>
<span class="token function">add_contact</span><span class="token punctuation">(</span><span class="token string">"张三"</span><span class="token punctuation">,</span> <span class="token string">"13800138000"</span><span class="token punctuation">,</span> <span class="token string">"zhangsan@email.com"</span><span class="token punctuation">)</span>
<span class="token function">add_contact</span><span class="token punctuation">(</span><span class="token string">"李四"</span><span class="token punctuation">,</span> <span class="token string">"13900139000"</span><span class="token punctuation">)</span>
<span class="token function">add_contact</span><span class="token punctuation">(</span><span class="token string">"王五"</span><span class="token punctuation">,</span> <span class="token string">"13700137000"</span><span class="token punctuation">,</span> <span class="token string">"wangwu@company.com"</span><span class="token punctuation">)</span>

<span class="token function">list_contacts</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token function">find_contact</span><span class="token punctuation">(</span><span class="token string">"张三"</span><span class="token punctuation">)</span>
<span class="token function">find_contact</span><span class="token punctuation">(</span><span class="token string">"赵六"</span><span class="token punctuation">)</span>

<span class="token function">remove_contact</span><span class="token punctuation">(</span><span class="token string">"李四"</span><span class="token punctuation">)</span>
<span class="token function">list_contacts</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">--[[ 输出
=== 联系人管理系统 ===
已添加联系人: 张三
已添加联系人: 李四
已添加联系人: 王五
通讯录为空
找到联系人 张三:
  电话: 17300138000
  邮箱: zhangsan@email.com
未找到联系人: 赵六
已删除联系人: 李四
通讯录为空
--]]</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h3"><h3 data-heading="练习 2：购物车系统" dir="auto" class="heading" id="练习_2：购物车系统_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>练习 2：购物车系统</h3></div><div class="el-p"><p dir="auto">（答案见 <a data-href="第 1 节 - 语法/参考答案#练习 7 2：购物车系统" href="第-1-节-语法/参考答案.html#练习 7 2：购物车系统" class="internal-link" target="_self" rel="noopener nofollow">第 1 节 - 语法/参考答案 &gt; 练习 7 2：购物车系统</a>）</p></div><div class="el-pre"><pre class="language-lua"><code data-line="0" class="language-lua is-loaded"><span class="token comment">-- 实现一个购物车系统，可以向购物车增加与移除商品，然后通过购物车购买，买完清空购物车，要求：自行查资料使用 string.format 格式化价格，让价格仅保留两位小数与对齐（%宽度.小数位数f）</span>
<span class="token comment">-- 使用示例：</span>
<span class="token comment">-- 测试购物车系统</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"=== 购物车系统 ==="</span><span class="token punctuation">)</span>
shopping_cart<span class="token punctuation">:</span><span class="token function">add_item</span><span class="token punctuation">(</span><span class="token string">"苹果"</span><span class="token punctuation">,</span> <span class="token number">5.5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
shopping_cart<span class="token punctuation">:</span><span class="token function">add_item</span><span class="token punctuation">(</span><span class="token string">"香蕉"</span><span class="token punctuation">,</span> <span class="token number">3.2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
shopping_cart<span class="token punctuation">:</span><span class="token function">add_item</span><span class="token punctuation">(</span><span class="token string">"苹果"</span><span class="token punctuation">,</span> <span class="token number">5.5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>  <span class="token comment">-- 增加苹果数量</span>

shopping_cart<span class="token punctuation">:</span><span class="token function">show_cart</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

shopping_cart<span class="token punctuation">:</span><span class="token function">remove_item</span><span class="token punctuation">(</span><span class="token string">"香蕉"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>  <span class="token comment">-- 减少香蕉数量</span>

shopping_cart<span class="token punctuation">:</span><span class="token function">show_cart</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

shopping_cart<span class="token punctuation">:</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
shopping_cart<span class="token punctuation">:</span><span class="token function">show_cart</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">--[[ 输出
== 购物车系统 ===
已添加商品: 苹果 x2
已添加商品: 香蕉 x3
已更新商品: 苹果 x1
=== 购物车 ===
1. 苹果          单价:   5.50 数量:   3 小计:    16.50
2. 香蕉          单价:   3.20 数量:   3 小计:     9.60

总计: 38.90 元
已减少商品: 香蕉 x1，剩余: x2
=== 购物车 ===
1. 苹果          单价:   5.50 数量:   3 小计:    16.50
2. 香蕉          单价:   3.20 数量:   2 小计:     6.40

总计: 35.70 元
已清空购物车
购物车为空
--]]</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h2"><h2 data-heading="7.8 本章总结" dir="auto" class="heading" id="7.8_本章总结_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>7.8 本章总结</h2></div><div class="el-h3"><h3 data-heading="关键知识点回顾" dir="auto" class="heading" id="关键知识点回顾_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>关键知识点回顾</h3></div><div class="el-ol"><ol>
<li data-line="0" dir="auto"><span class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>
<p><strong>表的创建和初始化</strong>：</p>
<ul class="has-list-bullet">
<li data-line="1" dir="auto"><span class="list-bullet"></span>使用 <code>{}</code> 创建空表</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>构造器语法可以初始化数组和字典部分</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>表是引用类型，赋值传递的是引用</li>
</ul>
</li>
<li data-line="5" dir="auto"><span class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>
<p><strong>表的操作</strong>：</p>
<ul class="has-list-bullet">
<li data-line="6" dir="auto"><span class="list-bullet"></span>增：有洞直接赋值，无洞使用 <code>table.insert</code></li>
<li data-line="7" dir="auto"><span class="list-bullet"></span>删：有洞设为 <code>nil</code> ，无洞使用 <code>table.remove</code></li>
<li data-line="8" dir="auto"><span class="list-bullet"></span>查：通过键访问，注意处理 <code>nil</code> 值</li>
<li data-line="9" dir="auto"><span class="list-bullet"></span>长度：<code>#</code> 操作符只计算数组部分</li>
</ul>
</li>
<li data-line="11" dir="auto"><span class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>
<p><strong>表遍历</strong>：</p>
<ul class="has-list-bullet">
<li data-line="12" dir="auto"><span class="list-bullet"></span><code>ipairs</code>：遍历连续数组部分（索引从 1 开始）</li>
<li data-line="13" dir="auto"><span class="list-bullet"></span><code>pairs</code>：遍历所有键值对（顺序不确定）</li>
<li data-line="14" dir="auto"><span class="list-bullet"></span>自定义排序遍历</li>
</ul>
</li>
<li data-line="16" dir="auto"><span class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>
<p><strong>相关函数</strong></p>
<ul class="has-list-bullet">
<li data-line="17" dir="auto"><span class="list-bullet"></span><code>table.concat</code> 将表连接为字符串</li>
<li data-line="18" dir="auto"><span class="list-bullet"></span><code>table.sort</code> 表排序，匿名函数传递两个参数</li>
</ul>
</li>
<li data-line="20" dir="auto"><span class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>
<p><strong>高级用法</strong>：</p>
<ul class="has-list-bullet">
<li data-line="21" dir="auto"><span class="list-bullet"></span>表的复制（浅复制和深复制）</li>
<li data-line="22" dir="auto"><span class="list-bullet"></span>表的合并</li>
<li data-line="23" dir="auto"><span class="list-bullet"></span>表作为对象使用（存储函数）</li>
<li data-line="24" dir="auto"><span class="list-bullet"></span>使用语法糖 <code>:</code> 冒号来隐式传递 <code>self</code> 参数</li>
<li data-line="25" dir="auto"><span class="list-bullet"></span>元表基础（改变表的默认行为）</li>
</ul>
</li>
</ol></div><div class="el-h3"><h3 data-heading="表的设计模式" dir="auto" class="heading" id="表的设计模式_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>表的设计模式</h3></div><div class="el-pre"><pre class="language-lua"><code data-line="0" class="language-lua is-loaded"><span class="token comment">-- 模式 1：配置对象</span>
<span class="token keyword">local</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
    window <span class="token operator">=</span> <span class="token punctuation">{</span>
        width <span class="token operator">=</span> <span class="token number">800</span><span class="token punctuation">,</span>
        height <span class="token operator">=</span> <span class="token number">600</span><span class="token punctuation">,</span>
        title <span class="token operator">=</span> <span class="token string">"我的游戏"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    player <span class="token operator">=</span> <span class="token punctuation">{</span>
        speed <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">,</span>
        health <span class="token operator">=</span> <span class="token number">100</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">-- 模式 2：数据记录</span>
<span class="token keyword">local</span> student <span class="token operator">=</span> <span class="token punctuation">{</span>
    id <span class="token operator">=</span> <span class="token number">1001</span><span class="token punctuation">,</span>
    name <span class="token operator">=</span> <span class="token string">"小明"</span><span class="token punctuation">,</span>
    scores <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">85</span><span class="token punctuation">,</span> <span class="token number">92</span><span class="token punctuation">,</span> <span class="token number">78</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    average <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span>
        <span class="token keyword">local</span> sum <span class="token operator">=</span> <span class="token number">0</span>
        
        <span class="token keyword">for</span> _<span class="token punctuation">,</span> score <span class="token keyword">in</span> <span class="token function">ipairs</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>scores<span class="token punctuation">)</span> <span class="token keyword">do</span>
            sum <span class="token operator">=</span> sum <span class="token operator">+</span> score
        <span class="token keyword">end</span>
        
        <span class="token keyword">return</span> sum <span class="token operator">/</span> <span class="token operator">#</span>self <span class="token punctuation">.</span>scores
    <span class="token keyword">end</span>
<span class="token punctuation">}</span>

<span class="token comment">-- 模式 3：命名空间（模块模式）</span>
<span class="token keyword">local</span> math_utils <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">function</span> math_utils<span class="token punctuation">.</span><span class="token function">clamp</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> min<span class="token punctuation">,</span> max<span class="token punctuation">)</span>
    <span class="token keyword">if</span> value <span class="token operator">&lt;</span> min <span class="token keyword">then</span> <span class="token keyword">return</span> min <span class="token keyword">end</span>
    <span class="token keyword">if</span> value <span class="token operator">&gt;</span> max <span class="token keyword">then</span> <span class="token keyword">return</span> max <span class="token keyword">end</span>
    
    <span class="token keyword">return</span> value
<span class="token keyword">end</span>

<span class="token keyword">function</span> math_utils<span class="token punctuation">.</span><span class="token function">lerp</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> t<span class="token punctuation">)</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> <span class="token punctuation">(</span>b <span class="token operator">-</span> a<span class="token punctuation">)</span> <span class="token operator">*</span> t
<span class="token keyword">end</span>

<span class="token comment">-- 使用</span>
<span class="token keyword">local</span> value <span class="token operator">=</span> math_utils<span class="token punctuation">.</span><span class="token function">clamp</span><span class="token punctuation">(</span><span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>  <span class="token comment">-- 100</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h3"><h3 data-heading="常见错误" dir="auto" class="heading" id="常见错误_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>常见错误</h3></div><div class="el-pre"><pre class="language-lua"><code data-line="0" class="language-lua is-loaded"><span class="token comment">-- 错误 1：误用 #操作符</span>
<span class="token keyword">local</span> t <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
t<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"值"</span>
<span class="token function">print</span><span class="token punctuation">(</span> <span class="token operator">#</span>t <span class="token punctuation">)</span>  <span class="token comment">-- 0，不是 100！</span>

<span class="token comment">-- 错误 2：在循环中修改表</span>
<span class="token keyword">local</span> items <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span>
<span class="token keyword">for</span> i<span class="token punctuation">,</span> v <span class="token keyword">in</span> <span class="token function">ipairs</span><span class="token punctuation">(</span>items<span class="token punctuation">)</span> <span class="token keyword">do</span>
    <span class="token keyword">if</span> v <span class="token operator">==</span> <span class="token number">2</span> <span class="token keyword">then</span>
        table<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>items<span class="token punctuation">,</span> i<span class="token punctuation">)</span>  <span class="token comment">-- 这会导致跳过下一个元素</span>
    <span class="token keyword">end</span>
<span class="token keyword">end</span>

<span class="token comment">-- 正确做法：从后往前遍历</span>
<span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token operator">#</span>items <span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token keyword">do</span>
    <span class="token keyword">if</span> items<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">2</span> <span class="token keyword">then</span>
        table<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>items<span class="token punctuation">,</span> i<span class="token punctuation">)</span>
    <span class="token keyword">end</span>
<span class="token keyword">end</span>

<span class="token comment">-- 错误 3：忘记表的引用特性</span>
<span class="token keyword">local</span> original <span class="token operator">=</span> <span class="token punctuation">{</span>data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token keyword">local</span> copy <span class="token operator">=</span> original  <span class="token comment">-- 这只是引用，不是复制！</span>
copy<span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">100</span>  <span class="token comment">-- 也会修改 original</span>

<span class="token comment">-- 错误 4：混合数组和字典时的不当操作</span>
<span class="token keyword">local</span> mixed <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> a <span class="token operator">=</span> <span class="token string">"A"</span><span class="token punctuation">}</span>
table<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>mixed<span class="token punctuation">)</span>  <span class="token comment">-- 错误：不能对混合表排序！</span>

<span class="token keyword">local</span> dict <span class="token operator">=</span> <span class="token punctuation">{</span>a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">}</span>
<span class="token keyword">local</span> l <span class="token operator">=</span> <span class="token operator">#</span>dict		<span class="token comment">-- 错误：长度运算符仅适用于字符串与列表，这里 l = 0</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h3"><h3 data-heading="性能优化建议" dir="auto" class="heading" id="性能优化建议_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>性能优化建议</h3></div><div class="el-pre"><pre class="language-lua"><code data-line="0" class="language-lua is-loaded"><span class="token comment">-- 1. 预分配大数组（如果知道大小）</span>
<span class="token keyword">local</span> big_array <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10000</span> <span class="token keyword">do</span>
    big_array<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>  <span class="token comment">-- 避免多次重新分配</span>
<span class="token keyword">end</span>

<span class="token comment">-- 2. 避免在循环中多次计算表长度</span>
<span class="token keyword">local</span> items <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span>
<span class="token keyword">local</span> length <span class="token operator">=</span> <span class="token operator">#</span>items  <span class="token comment">-- 先计算一次</span>
<span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> length <span class="token keyword">do</span>
    <span class="token comment">-- 使用缓存的值</span>
<span class="token keyword">end</span>

<span class="token comment">-- 3. 使用局部引用访问嵌套表的深层元素</span>
<span class="token keyword">local</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
    game <span class="token operator">=</span> <span class="token punctuation">{</span>
        settings <span class="token operator">=</span> <span class="token punctuation">{</span>
            graphics <span class="token operator">=</span> <span class="token punctuation">{</span>
                quality <span class="token operator">=</span> <span class="token string">"high"</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">-- 不好：多次查找</span>
<span class="token function">print</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>game<span class="token punctuation">.</span>settings<span class="token punctuation">.</span>graphics<span class="token punctuation">.</span>quality<span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>game<span class="token punctuation">.</span>settings<span class="token punctuation">.</span>graphics<span class="token punctuation">.</span>resolution<span class="token punctuation">)</span>

<span class="token comment">-- 好：使用局部引用</span>
<span class="token keyword">local</span> graphics <span class="token operator">=</span> config<span class="token punctuation">.</span>game<span class="token punctuation">.</span>settings<span class="token punctuation">.</span>graphics
<span class="token function">print</span><span class="token punctuation">(</span>graphics<span class="token punctuation">.</span>quality<span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span>graphics<span class="token punctuation">.</span>resolution<span class="token punctuation">)</span>

<span class="token comment">-- 4. 选择合适的遍历方式</span>
<span class="token comment">-- ipairs 比 pairs 快（只遍历数组部分）</span>
<span class="token comment">-- 如果需要遍历所有元素，但表主要是数组，先用 ipairs</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h3"><h3 data-heading="检查清单" dir="auto" class="heading" id="检查清单_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>检查清单</h3></div><div class="el-p"><p dir="auto">（点击勾选框勾选）<br>
完成本章后，你应该能够：</p></div><div class="el-ul"><ul class="contains-task-list has-list-bullet">
<li data-line="0" data-task="" class="task-list-item" dir="auto"><span class="list-bullet"></span><input data-line="0" type="checkbox" class="task-list-item-checkbox">创建和初始化各种类型的表</li>
<li data-line="1" data-task="" class="task-list-item" dir="auto"><span class="list-bullet"></span><input data-line="1" type="checkbox" class="task-list-item-checkbox">对表进行增删改查操作</li>
<li data-line="2" data-task="" class="task-list-item" dir="auto"><span class="list-bullet"></span><input data-line="2" type="checkbox" class="task-list-item-checkbox">正确遍历表的数组部分和所有元素</li>
<li data-line="3" data-task="" class="task-list-item" dir="auto"><span class="list-bullet"></span><input data-line="3" type="checkbox" class="task-list-item-checkbox">使用表相关内置函数</li>
<li data-line="4" data-task="" class="task-list-item" dir="auto"><span class="list-bullet"></span><input data-line="4" type="checkbox" class="task-list-item-checkbox">实现表的浅复制和深复制</li>
<li data-line="5" data-task="" class="task-list-item" dir="auto"><span class="list-bullet"></span><input data-line="5" type="checkbox" class="task-list-item-checkbox">使用表模拟对象和命名空间</li>
<li data-line="6" data-task="" class="task-list-item" dir="auto"><span class="list-bullet"></span><input data-line="6" type="checkbox" class="task-list-item-checkbox">理解元表的基本概念</li>
<li data-line="7" data-task="" class="task-list-item" dir="auto"><span class="list-bullet"></span><input data-line="7" type="checkbox" class="task-list-item-checkbox">设计和使用复杂的数据结构</li>
</ul></div><div class="el-h3"><h3 data-heading="思考题" dir="auto" class="heading" id="思考题_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>思考题</h3></div><div class="el-ol"><ol>
<li data-line="0" dir="auto">Lua 为什么选择表作为唯一的数据结构？这种设计有什么优缺点？</li>
<li data-line="1" dir="auto">什么情况下应该使用数组形式的表，什么情况下应该使用字典形式的表？</li>
<li data-line="2" dir="auto">表的引用特性在什么情况下是有用的，什么情况下会带来问题？</li>
<li data-line="3" dir="auto">如何设计一个高效的表来存储大量数据？</li>
<li data-line="4" dir="auto">元表能实现哪些强大的功能？你能想到什么实际应用场景？</li>
</ol></div><div class="el-h3"><h3 data-heading="拓展练习" dir="auto" class="heading" id="拓展练习_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>拓展练习</h3></div><div class="el-ol"><ol>
<li data-line="0" dir="auto">实现一个简单的数据库系统，支持增删改查操作</li>
<li data-line="1" dir="auto">创建一个图数据结构，支持添加节点、边和路径查找</li>
<li data-line="2" dir="auto">创建一个事件系统，支持事件的注册、触发和取消</li>
</ol></div><div class="el-hr"><hr></div><div class="el-p"><p dir="auto"><strong>下一章预告</strong>：在第 8 章中，我们将学习字符串处理。字符串是编程中无处不在的数据类型，Lua 提供了强大的字符串操作功能，包括基础操作和强大的模式匹配（类似正则表达式但更简洁）。我们将学习如何创建、操作、搜索和格式化字符串。</p></div><div class="el-p"><p dir="auto"><strong>学习建议</strong>：</p></div><div class="el-ol"><ol>
<li data-line="0" dir="auto">多练习表的创建和操作，这是 Lua 的核心</li>
<li data-line="1" dir="auto">尝试用表解决各种实际问题</li>
<li data-line="2" dir="auto">理解表的引用特性，避免常见错误</li>
<li data-line="3" dir="auto">学习表的性能特点，编写高效的代码</li>
<li data-line="4" dir="auto">探索表的高级用法，特别是作为对象和模块的使用</li>
</ol></div><div class="footer"><div class="data-bar"></div></div></div></div></div><div id="right-content" class="leaf" style="--sidebar-width: var(--sidebar-width-right);"><div id="right-sidebar" class="sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"><label class="theme-toggle-container" for="theme-toggle-input" id=""><input class="theme-toggle-input" type="checkbox" id="theme-toggle-input"><div class="toggle-background"></div></label></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content-wrapper"><div id="right-sidebar-content" class="leaf-content"><div id="outline" class=" tree-container"><div class="feature-header"><div class="feature-title">Table Of Contents</div><button class="clickable-icon nav-action-button tree-collapse-all" aria-label="Collapse All"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></svg></button></div><div class="tree-item mod-collapsible" data-depth="1"><a class="tree-item-self is-clickable mod-collapsible" href="第-1-节-语法/7.-表.html#7._表_0" data-path="#7._表_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="7. 表">7. 表</div></a><div class="tree-item-children"><div class="tree-item mod-collapsible" data-depth="2"><a class="tree-item-self is-clickable mod-collapsible" href="第-1-节-语法/7.-表.html#7.1_什么是表？_0" data-path="#7.1_什么是表？_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="7.1 什么是表？">7.1 什么是表？</div></a><div class="tree-item-children"><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="第-1-节-语法/7.-表.html#表的核心理念_0" data-path="#表的核心理念_0"><div class="tree-item-inner heading-link" heading-name="表的核心理念">表的核心理念</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-collapsible" data-depth="2"><a class="tree-item-self is-clickable mod-collapsible" href="第-1-节-语法/7.-表.html#7.2_表的创建和初始化_0" data-path="#7.2_表的创建和初始化_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="7.2 表的创建和初始化">7.2 表的创建和初始化</div></a><div class="tree-item-children"><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="第-1-节-语法/7.-表.html#7.2.1_创建空表_0" data-path="#7.2.1_创建空表_0"><div class="tree-item-inner heading-link" heading-name="7.2.1 创建空表">7.2.1 创建空表</div></a><div class="tree-item-children"></div></div><div class="tree-item mod-collapsible" data-depth="3"><a class="tree-item-self is-clickable mod-collapsible" href="第-1-节-语法/7.-表.html#7.2.2_使用构造器初始化表_0" data-path="#7.2.2_使用构造器初始化表_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="7.2.2 使用构造器初始化表">7.2.2 使用构造器初始化表</div></a><div class="tree-item-children"><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="第-1-节-语法/7.-表.html#作为数组（列表）使用_0" data-path="#作为数组（列表）使用_0"><div class="tree-item-inner heading-link" heading-name="作为数组（列表）使用">作为数组（列表）使用</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="第-1-节-语法/7.-表.html#作为字典（映射）使用_0" data-path="#作为字典（映射）使用_0"><div class="tree-item-inner heading-link" heading-name="作为字典（映射）使用">作为字典（映射）使用</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="第-1-节-语法/7.-表.html#混合使用（数组部分+字典部分）_0" data-path="#混合使用（数组部分+字典部分）_0"><div class="tree-item-inner heading-link" heading-name="混合使用（数组部分+字典部分）">混合使用（数组部分+字典部分）</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="第-1-节-语法/7.-表.html#嵌套表_0" data-path="#嵌套表_0"><div class="tree-item-inner heading-link" heading-name="嵌套表">嵌套表</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="第-1-节-语法/7.-表.html#7.2.3_表的引用特性_0" data-path="#7.2.3_表的引用特性_0"><div class="tree-item-inner heading-link" heading-name="7.2.3 表的引用特性">7.2.3 表的引用特性</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-collapsible" data-depth="2"><a class="tree-item-self is-clickable mod-collapsible" href="第-1-节-语法/7.-表.html#7.3_表的操作_0" data-path="#7.3_表的操作_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="7.3 表的操作">7.3 表的操作</div></a><div class="tree-item-children"><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="第-1-节-语法/7.-表.html#7.3.1_直接修改与增加元素_0" data-path="#7.3.1_直接修改与增加元素_0"><div class="tree-item-inner heading-link" heading-name="7.3.1 直接修改与增加元素">7.3.1 直接修改与增加元素</div></a><div class="tree-item-children"></div></div><div class="tree-item mod-collapsible" data-depth="3"><a class="tree-item-self is-clickable mod-collapsible" href="第-1-节-语法/7.-表.html#7.3.2_table.insert_-_插入元素到数组_0" data-path="#7.3.2_table.insert_-_插入元素到数组_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="7.3.2 table.insert - 插入元素到数组">7.3.2 table.insert - 插入元素到数组</div></a><div class="tree-item-children"><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="第-1-节-语法/7.-表.html#示例_0" data-path="#示例_0"><div class="tree-item-inner heading-link" heading-name="示例">示例</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-collapsible" data-depth="3"><a class="tree-item-self is-clickable mod-collapsible" href="第-1-节-语法/7.-表.html#7.3.3_table.remove_-_移除数组元素_0" data-path="#7.3.3_table.remove_-_移除数组元素_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="7.3.3 table.remove - 移除数组元素">7.3.3 table.remove - 移除数组元素</div></a><div class="tree-item-children"><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="第-1-节-语法/7.-表.html#示例_1" data-path="#示例_1"><div class="tree-item-inner heading-link" heading-name="示例">示例</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-collapsible" data-depth="3"><a class="tree-item-self is-clickable mod-collapsible" href="第-1-节-语法/7.-表.html#7.3.4_查询元素_0" data-path="#7.3.4_查询元素_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="7.3.4 查询元素">7.3.4 查询元素</div></a><div class="tree-item-children"><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="第-1-节-语法/7.-表.html#使用逻辑运算符安全的访问表_0" data-path="#使用逻辑运算符安全的访问表_0"><div class="tree-item-inner heading-link" heading-name="使用逻辑运算符安全的访问表">使用逻辑运算符安全的访问表</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-collapsible" data-depth="3"><a class="tree-item-self is-clickable mod-collapsible" href="第-1-节-语法/7.-表.html#7.3.5_表的长度运算符符_0" data-path="#7.3.5_表的长度运算符符_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="7.3.5 表的长度运算符符">7.3.5 表的长度运算符符</div></a><div class="tree-item-children"><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="第-1-节-语法/7.-表.html#示例_2" data-path="#示例_2"><div class="tree-item-inner heading-link" heading-name="示例">示例</div></a><div class="tree-item-children"></div></div></div></div></div></div><div class="tree-item mod-collapsible" data-depth="2"><a class="tree-item-self is-clickable mod-collapsible" href="第-1-节-语法/7.-表.html#7.4_表遍历_0" data-path="#7.4_表遍历_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="7.4 表遍历">7.4 表遍历</div></a><div class="tree-item-children"><div class="tree-item mod-collapsible" data-depth="3"><a class="tree-item-self is-clickable mod-collapsible" href="第-1-节-语法/7.-表.html#7.4.1_ipairs_-_遍历数组部分_0" data-path="#7.4.1_ipairs_-_遍历数组部分_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="7.4.1 ipairs - 遍历数组部分">7.4.1 ipairs - 遍历数组部分</div></a><div class="tree-item-children"><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="第-1-节-语法/7.-表.html#示例_3" data-path="#示例_3"><div class="tree-item-inner heading-link" heading-name="示例">示例</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-collapsible" data-depth="3"><a class="tree-item-self is-clickable mod-collapsible" href="第-1-节-语法/7.-表.html#7.4.2_pairs_-_遍历所有元素_0" data-path="#7.4.2_pairs_-_遍历所有元素_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="7.4.2 pairs - 遍历所有元素">7.4.2 pairs - 遍历所有元素</div></a><div class="tree-item-children"><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="第-1-节-语法/7.-表.html#对比ipairs和pairs_0" data-path="#对比ipairs和pairs_0"><div class="tree-item-inner heading-link" heading-name="对比ipairs和pairs">对比ipairs和pairs</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="第-1-节-语法/7.-表.html#示例_4" data-path="#示例_4"><div class="tree-item-inner heading-link" heading-name="示例">示例</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-collapsible" data-depth="3"><a class="tree-item-self is-clickable mod-collapsible" href="第-1-节-语法/7.-表.html#7.4.3_自定义遍历顺序_0" data-path="#7.4.3_自定义遍历顺序_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="7.4.3 自定义遍历顺序">7.4.3 自定义遍历顺序</div></a><div class="tree-item-children"><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="第-1-节-语法/7.-表.html#示例_5" data-path="#示例_5"><div class="tree-item-inner heading-link" heading-name="示例">示例</div></a><div class="tree-item-children"></div></div></div></div></div></div><div class="tree-item mod-collapsible" data-depth="2"><a class="tree-item-self is-clickable mod-collapsible" href="第-1-节-语法/7.-表.html#7.5_表相关函数_0" data-path="#7.5_表相关函数_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="7.5 表相关函数">7.5 表相关函数</div></a><div class="tree-item-children"><div class="tree-item mod-collapsible" data-depth="3"><a class="tree-item-self is-clickable mod-collapsible" href="第-1-节-语法/7.-表.html#7.5.1_table.concat_-_连接为字符串_0" data-path="#7.5.1_table.concat_-_连接为字符串_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="7.5.1 table.concat - 连接为字符串">7.5.1 table.concat - 连接为字符串</div></a><div class="tree-item-children"><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="第-1-节-语法/7.-表.html#示例_6" data-path="#示例_6"><div class="tree-item-inner heading-link" heading-name="示例">示例</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-collapsible" data-depth="3"><a class="tree-item-self is-clickable mod-collapsible" href="第-1-节-语法/7.-表.html#7.5.2_table.sort_-_排序_0" data-path="#7.5.2_table.sort_-_排序_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="7.5.2 table.sort - 排序">7.5.2 table.sort - 排序</div></a><div class="tree-item-children"><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="第-1-节-语法/7.-表.html#语法_0" data-path="#语法_0"><div class="tree-item-inner heading-link" heading-name="语法">语法</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="第-1-节-语法/7.-表.html#示例_7" data-path="#示例_7"><div class="tree-item-inner heading-link" heading-name="示例">示例</div></a><div class="tree-item-children"></div></div></div></div></div></div><div class="tree-item mod-collapsible" data-depth="2"><a class="tree-item-self is-clickable mod-collapsible" href="第-1-节-语法/7.-表.html#7.6_表的高级用法_0" data-path="#7.6_表的高级用法_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="7.6 表的高级用法">7.6 表的高级用法</div></a><div class="tree-item-children"><div class="tree-item mod-collapsible" data-depth="3"><a class="tree-item-self is-clickable mod-collapsible" href="第-1-节-语法/7.-表.html#7.6.1_表的复制_0" data-path="#7.6.1_表的复制_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="7.6.1 表的复制">7.6.1 表的复制</div></a><div class="tree-item-children"><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="第-1-节-语法/7.-表.html#浅复制（浅拷贝）_0" data-path="#浅复制（浅拷贝）_0"><div class="tree-item-inner heading-link" heading-name="浅复制（浅拷贝）">浅复制（浅拷贝）</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="第-1-节-语法/7.-表.html#深复制（深拷贝）_0" data-path="#深复制（深拷贝）_0"><div class="tree-item-inner heading-link" heading-name="深复制（深拷贝）">深复制（深拷贝）</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-collapsible" data-depth="3"><a class="tree-item-self is-clickable mod-collapsible" href="第-1-节-语法/7.-表.html#7.6.2_表的合并_0" data-path="#7.6.2_表的合并_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="7.6.2 表的合并">7.6.2 表的合并</div></a><div class="tree-item-children"><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="第-1-节-语法/7.-表.html#浅合并_0" data-path="#浅合并_0"><div class="tree-item-inner heading-link" heading-name="浅合并">浅合并</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="第-1-节-语法/7.-表.html#深合并_0" data-path="#深合并_0"><div class="tree-item-inner heading-link" heading-name="深合并">深合并</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-collapsible" data-depth="3"><a class="tree-item-self is-clickable mod-collapsible" href="第-1-节-语法/7.-表.html#7.6.3_表作为对象使用_0" data-path="#7.6.3_表作为对象使用_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="7.6.3 表作为对象使用">7.6.3 表作为对象使用</div></a><div class="tree-item-children"><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="第-1-节-语法/7.-表.html#示例_8" data-path="#示例_8"><div class="tree-item-inner heading-link" heading-name="示例">示例</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="第-1-节-语法/7.-表.html#冒号语法糖_0" data-path="#冒号语法糖_0"><div class="tree-item-inner heading-link" heading-name="冒号语法糖">冒号语法糖</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="第-1-节-语法/7.-表.html#7.6.4_元表（Metatable）基础_0" data-path="#7.6.4_元表（Metatable）基础_0"><div class="tree-item-inner heading-link" heading-name="7.6.4 元表（Metatable）基础">7.6.4 元表（Metatable）基础</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-collapsible" data-depth="2"><a class="tree-item-self is-clickable mod-collapsible" href="第-1-节-语法/7.-表.html#7.7_练习_0" data-path="#7.7_练习_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="7.7 练习">7.7 练习</div></a><div class="tree-item-children"><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="第-1-节-语法/7.-表.html#练习_1：简单的联系人管理系统_0" data-path="#练习_1：简单的联系人管理系统_0"><div class="tree-item-inner heading-link" heading-name="练习 1：简单的联系人管理系统">练习 1：简单的联系人管理系统</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="第-1-节-语法/7.-表.html#练习_2：购物车系统_0" data-path="#练习_2：购物车系统_0"><div class="tree-item-inner heading-link" heading-name="练习 2：购物车系统">练习 2：购物车系统</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-collapsible" data-depth="2"><a class="tree-item-self is-clickable mod-collapsible" href="第-1-节-语法/7.-表.html#7.8_本章总结_0" data-path="#7.8_本章总结_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="7.8 本章总结">7.8 本章总结</div></a><div class="tree-item-children"><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="第-1-节-语法/7.-表.html#关键知识点回顾_0" data-path="#关键知识点回顾_0"><div class="tree-item-inner heading-link" heading-name="关键知识点回顾">关键知识点回顾</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="第-1-节-语法/7.-表.html#表的设计模式_0" data-path="#表的设计模式_0"><div class="tree-item-inner heading-link" heading-name="表的设计模式">表的设计模式</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="第-1-节-语法/7.-表.html#常见错误_0" data-path="#常见错误_0"><div class="tree-item-inner heading-link" heading-name="常见错误">常见错误</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="第-1-节-语法/7.-表.html#性能优化建议_0" data-path="#性能优化建议_0"><div class="tree-item-inner heading-link" heading-name="性能优化建议">性能优化建议</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="第-1-节-语法/7.-表.html#检查清单_0" data-path="#检查清单_0"><div class="tree-item-inner heading-link" heading-name="检查清单">检查清单</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="第-1-节-语法/7.-表.html#思考题_0" data-path="#思考题_0"><div class="tree-item-inner heading-link" heading-name="思考题">思考题</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="第-1-节-语法/7.-表.html#拓展练习_0" data-path="#拓展练习_0"><div class="tree-item-inner heading-link" heading-name="拓展练习">拓展练习</div></a><div class="tree-item-children"></div></div></div></div></div></div></div></div></div><script defer="">let rs = document.querySelector("#right-sidebar"); rs.classList.toggle("is-collapsed", window.innerWidth < 768); rs.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-right-width"));</script></div></div></div></div></body></html>