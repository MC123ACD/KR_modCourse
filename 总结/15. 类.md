# 关卡界面

| 类                 | 描述     | 类                   | 描述    |
| ----------------- | ------ | ------------------- | ----- |
| `HeroPortrait`    | 英雄头像   | `PowerButton`       | 能力按钮  |
| `BagButton`       | 背包按钮   | `NextWaveButton`    | 下一波按钮 |
| `InfoBar`         | 信息栏    | `PauseView`         | 暂停视图  |
| `VictoryView`     | 胜利视图   | `DefeatView`        | 失败视图  |
| `MousePointer`    | 鼠标指针   | `NotificationView`  | 通知视图  |
| `TutorialBalloon` | 教程提示   | `AchievementBanner` | 成就    |
| `PickView`        | 选择视图   | `RangeCircle`       | 攻击范围  |
| `TowerMenu`       | 防御塔菜单  | `IncomingTooltip`   | 新手提示  |
| `WaveFlag`        | 释放波次按钮 |                     |       |

# 地图界面

| 类                | 描述     | 类                  | 描述     |
| ---------------- | ------ | ------------------ | ------ |
| `MapView`        | 地图视图   | `LevelFlagView`    | 关卡旗帜   |
| `StarsBanner`    | 星星总数   | `LevelSelectView`  | 关卡选择视图 |
| `UpgradesView`   | 科技树视图  | `EncyclopediaView` | 图鉴视图   |
| `DifficultyView` | 选择难度视图 | `AchievementsView` | 成就视图   |

# 类

### KUI 框架核心类 (klove/kui.lua)

#### 1. KObject - 对象基类
**主要作用**：所有 UI 对象的基类，提供对象管理的基础功能
- 唯一 ID 生成和标识
- 父子关系管理（add_child/remove_child）
- 序列化和反序列化（保存/加载 UI 状态）
- 对象克隆
- 树形结构遍历

**使用场景**：需要对象管理功能的基础类

#### 2. KView - 视图基类
**主要作用**：所有可视 UI 组件的基类，提供渲染和布局功能
- 位置、尺寸、缩放、旋转控制
- 颜色、透明度管理
- 裁剪（clip）支持
- 动画系统（frame animation）
- 鼠标/触摸事件命中检测
- 坐标转换（屏幕↔视图）
- 子视图管理

**使用场景**：创建任何可视 UI 元素的基础

#### 3. KImageView - 图像视图
**主要作用**：显示图像的简单视图
- 加载和显示图像
- 图像缩放
- 基本的图像按钮功能

**使用场景**：显示静态图片或简单图像按钮

#### 4. KLabel - 文本标签
**主要作用**：显示文本的视图
- 字体管理
- 文本对齐（左/中/右）
- 多行文本支持
- 文本颜色

**使用场景**：显示文字信息

#### 5. KButton - 按钮基类
**主要作用**：交互式按钮的抽象基类
- 按钮状态管理（默认/悬停/按下）
- 点击事件处理
- 事件传播控制

**使用场景**：创建可交互按钮

#### 6. KImageButton - 图像按钮
**主要作用**：使用不同图像表示状态的按钮
- 为不同状态（正常/悬停/按下）使用不同图片
- 自动状态切换
- 键盘支持（回车键触发）

**使用场景**：游戏中的图片按钮

#### 7. KWindow - 窗口容器
**主要作用**：顶级窗口容器，管理输入事件
- 鼠标/触摸事件分发
- 键盘焦点管理
- 拖拽支持
- 滚轮事件处理
- 响应者链管理

**使用场景**：游戏主窗口、弹出窗口容器

#### 8. KScrollList - 滚动列表
**主要作用**：可垂直滚动的列表容器
- 内容滚动
- 滚动条显示
- 惯性滚动
- 滚动到顶部/底部

**使用场景**：聊天窗口、物品列表、设置列表

#### 9. KTable - 虚拟化表格
**主要作用**：高性能的虚拟化表格
- Cell 复用（性能优化）
- 仅渲染可见单元格
- 大数据集支持
- 表头表尾支持

**使用场景**：大量数据展示（如排行榜、背包）

#### 10. KVideoView - 视频视图
**主要作用**：播放视频
- 视频文件加载
- 视频播放控制

**使用场景**：游戏过场动画、教程视频

#### 11. KInertialView - 惯性视图
**主要作用**：支持惯性拖拽的视图
- 拖拽惯性效果
- 速度衰减
- 拖拽边界限制

**使用场景**：可拖拽的卡片、滑动面板

### GG 游戏基础组件 (gg_views.lua)

#### 1. GGLabel - 增强文本标签
**主要作用**：支持多语言和自适应的游戏文本标签
- 文本自适应（自动调整字体大小）
- 多语言字体适配
- 文本阴影
- 垂直对齐（上/中/下/基线）
- 字体缩放支持

**使用场景**：游戏中的所有文本显示

#### 2. GGShaderLabel - 着色器文本标签
**主要作用**：带有着色器效果的文本
- 发光效果
- 阴影效果
- 渐变效果
- 高性能渲染（预渲染到画布）

**使用场景**：需要特效的游戏文字（标题、重要提示）

#### 3. GGButton - 游戏标准按钮
**主要作用**：游戏风格的复合按钮（图片+文字）
- 图片背景 + 文字标签组合
- 按下缩放效果
- 状态颜色变化（默认/悬停）
- 预定义的着色器效果

**使用场景**：游戏中的主要交互按钮

#### 4. GGImageButton - 纯图像按钮
**主要作用**：只有图片没有文字的按钮
- 简单的三状态图片切换
- 按下缩放
- 轻量级按钮实现

**使用场景**：图标按钮、工具栏按钮

#### 5. GGToggleButton - 切换按钮
**主要作用**：两种状态切换的按钮
- 开/关状态管理
- 状态变化回调
- 按下效果

**使用场景**：开关、复选框

#### 6. GG9View - 9-patch 图片视图
**主要作用**：可伸缩的 9-patch 背景
- 图片 9-patch 切割
- 任意尺寸伸缩
- 保持圆角不变形
- 高性能（预渲染到画布）

**使用场景**：对话框背景、按钮背景、面板背景

#### 7. GG9SlicesView - 切片 9-patch 视图
**主要作用**：使用预切片的 9-patch 实现
- 水平和垂直单独控制
- 预定义切片命名约定（\_lt, \_ct, \_rt 等）
- 缺少切片时的回退策略

**使用场景**：更灵活的 9-patch 背景

#### 8. GGLayout - 简单布局管理器
**主要作用**：自动排列子视图
- 垂直布局（目前主要实现）
- 间距控制
- 文本标签自动高度计算

**使用场景**：设置面板、表单布局

#### 9. GGEllipseText - 弧形文本
**主要作用**：将文本排列成弧形
- 字符沿椭圆或弧形排列
- 每个字符单独旋转
- UTF-8 字符支持

**使用场景**：圆形按钮文字、弧形标题

### GG 游戏自定义组件 (gg_views_custom.lua)

#### 1. PopUpView - 弹出视图
**主要作用**：模态弹出窗口基类
- 半透明遮罩背景
- 淡入淡出动画
- 定时器管理
- 阻止底层交互

**使用场景**：确认对话框、提示窗口、设置面板

#### 2. GGBorderButton - 边框按钮
**主要作用**：带边框装饰的按钮
- 两种尺寸（标准/大型）
- 边框装饰效果
- 多语言垂直对齐

**使用场景**：装饰性按钮、次要操作

#### 3. GGOptionsLabel - 选项标签
**主要作用**：选项视图的文字标签
- 金色文字配色
- 发光效果
- 选项界面专用

**使用场景**：设置项标签、选项说明

#### 4. GGPanelHeader - 面板标题
**主要作用**：面板的标题文字
- 根据游戏类型不同样式
- KR3：棕色文字+阴影
- 其他：渐变文字+发光
- 居中显示

**使用场景**：面板标题、对话框标题

#### 5. VolumeSlider - 音量滑块

**主要作用**：音量控制滑块
- 滑块拖动交互
- 实时值变化回调
- 静音按钮集成
- 两种样式（音乐/音效）

**使用场景**：游戏音量设置

#### 6. GGDoneButton - 完成按钮

**主要作用**：大型完成操作的按钮
- 特定样式（英雄殿堂）
- 多语言字体大小适配
- 固定尺寸和布局

**使用场景**：确认完成、提交按钮

#### 7. **GGKR1SelectButton** - KR1选择按钮
**主要作用**：一代专用的选择按钮
- 特定锚点设置（75, 36）
- 一代风格
- 本地化适配

#### 8. GGOptionsButton - 选项按钮

**主要作用**：选项视图的标准按钮
- 中等尺寸
- 选项视图专用样式
- 多语言支持

**使用场景**：游戏选项、设置按钮

#### 9. GGUpgradesButton - 科技按钮

**主要作用**：科技的按钮
- 科技视图专用样式
- 禁用状态特殊处理
- 无文本变体支持

**使用场景**：技能升级、装备升级

#### 10. GGBorderButton - 边框按钮

**主要作用**：带边框装饰的按钮

- 两种尺寸（标准/大型）
- 边框装饰效果
- 多语言垂直对齐

**使用场景**：装饰性按钮、次要操作

#### 11. GGOptionsLabel - 选项标签

**主要作用**：选项视图的文字标签

- 金色文字配色
- 发光效果
- 选项界面专用

**使用场景**：设置项标签、选项说明

#### 12. GGPanelHeader - 面板标题

**主要作用**：面板的标题文字

- 根据游戏类型不同样式
- 三代：棕色文字+阴影
- 其他：渐变文字+发光
- 居中显示

**使用场景**：面板标题、对话框标题

### 混合类（Mixin）

#### 1. KMDragInertia - 拖拽惯性
**主要作用**：为视图添加惯性拖拽功能
- 拖拽速度计算
- 惯性运动
- 阻尼系数控制

#### 2. KMShaderDraw - 着色器绘制
**主要作用**：为视图添加着色器渲染
- 预渲染到画布
- 着色器链式处理
- 性能优化

#### 3. KMOverrides - 样式覆盖
**主要作用**：运行时样式切换
- 样式表管理
- 动态样式应用

#### 4. KMLocaleOverrides - 本地化覆盖
**主要作用**：多语言样式适配
- 基于语言的样式切换
- 字体大小调整

