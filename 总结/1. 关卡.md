# 关卡编号

|           | 一代    |           | 二代    |           | 三代    |           | 四代    |           | 五代   |
| --------- | ----- | --------- | ----- | --------- | ----- | --------- | ----- | --------- | ---- |
| **1-12**  | 主线    | **1-15**  | 主线    | **1-15**  | 主线    | **0**     | 教程关   | **1-16**  | 主线   |
| **13**    | 蜘蛛支线  | **16-18** | 海战支线  | **16-18** | 食人魔支线 | **1-16**  | 主线    | **17-19** | 灵魂支线 |
| **14**    | 兽人支线  | **19-21** | 万圣节支线 | **19-20** | 暮光支线  | **17-19** | 青蛙支线  | **20-22** | 鳄鱼支线 |
| **15**    | 沼泽支线  | **22**    | 蜥蜴人支线 | **21-22** | 矮人支线  | **20-22** | 冰川支线  | **23-27** | 矮人支线 |
| **16-17** | 强盗支线  |           |       |           |       | **23-25** | 天朝支线  | **28-30** | 蜘蛛支线 |
| **18-19** | 巨魔支线  |           |       |           |       | **26-28** | 万圣节支线 | **31-35** | 悟空支线 |
| **20-21** | 恶魔支线  |           |       |           |       | **29-31** | 原始支线  |           |      |
| **22**    | 蘑菇人支线 |           |       |           |       | **32-36** | 沙漠支线  |           |      |
| **23-26** | 万圣节支线 |           |       |           |       | **37-41** | 海盗支线  |           |      |

# 路径函数
### [一] 获取路径宽度
```lua
P:path_width(路径: int, 子路径: int, 节点: int) -> 宽度: int
```

### [二] 获取节点坐标
```lua
P:node_pos(路径: int, 子路径: int, 节点: int, 是否返回引用?: bool) -> 节点坐标: vec2
```

### [三] 获取偏移后节点坐标
```lua
P:node_offset_pos(偏移量: int, 路径: int, 子路径: int, 节点: int) -> 节点坐标: vec2
```

### [四] 获取起点节点
```lua
P:get_start_node(路径: int) -> 节点: int
```

### [五] 获取终点节点
```lua
P:get_end_node(路径: int) -> 节点: int
```

### [六] 获取防守点节点
```lua
P:get_defend_point_node(路径: int) -> 节点: int
```

### [七] 获取节点到起点距离
```lua
P:nodes_from_start(路径: int, 子路径: int, 节点: int) -> 节点距离: int
```

### [八] 获取节点到终点距离
```lua
P:nodes_to_goal(路径: int, 子路径: int, 节点: int) -> 节点距离: int
```

### [九] 获取节点到防守点距离
```lua
P:nodes_to_defend_point(路径: int, 子路径: int, 节点: int) -> 节点距离: int
```

### [十] 获取可见终点节点
```lua
P:get_visible_end_node(路径: int) -> 节点: int
```

### [十一] 返回可见起点节点
```lua
P:get_visible_start_node(路径: int) -> 节点: int
```

### [十二] 判断一定距离是否存在节点
```lua
P:point_within_distance(x, y, 距离: num) -> 是否存在: bool
```

### [十三] 返回附近所有节点
```lua
P:nearest_nodes(x, y, 路径?: list{ 路径: int... }, 子路径?: list{ 子路径: int... }, 是否仅有效节点: bool, 标签: int, 过滤函数?: func, 步长: int) -> 节点列表: list{list{ 路径: int, 子路径: int, 节点: int, 距离: num }...}
```
- 返回一个根据距离排序的节点列表
- 不指定路径将会在所有路径查找节点
- 子路径默认值 `{ 1 }`

### [十四] 返回地形类型
```lua
P:path_terrain_types(路径: int) -> 地形标志: int
```

### [十五] 返回地形属性
```lua
P:path_terrain_props(路径: int) -> 地形标志: int
```

### [十六] 判断路径是否激活
```lua
P:is_path_active(路径: int) -> 是否激活: bool
```

### [十七] 开启路径
```lua
P:activate_path(路径: int)
```

### [十八] 关闭路径
```lua
P:deactivate_path(路径: int)
```

### [十九] 增加无效节点范围
```lua
P:add_invalid_range(路径: int, 从: int, 到: int, 标签: int)
```

### [二十] 移除无效节点范围
```lua
P:remove_invalid_range(路径: int, 从: int, 到: int)
```

### [二十一] 判断节点是否有效
```lua
P:is_node_valid(路径: int, 节点: int, 标签: int) -> 是否有效: bool
```

### [二十二] 返回所有有效节点
```lua
P:get_valid_nodes(路径: int, 标签: int) -> 有效节点列表: list{ 节点: int... }
```

### [二十三] 返回第一个找到的有效节点
```lua
P:find_valid_node(路径: int, 开始节点: int, 步长: int, 标签: int) -> 节点: int
```

### [二十四] 判断附近有没有有效节点
```lua
P:valid_node_nearby(x, y, 路径宽度乘数: num, 标签: int) -> 是否存在: bool
```

### [二十五] 返回随机节点信息
```lua
P:get_random_position(边距: int | list{ 前边距: int, 后边距: int }, 地形标签: int, 标签: int, 边距是否从防守点开始计算: bool) -> 节点坐标: vec2, 路径: int, 子路径: int, 节点: int
```

### [二十六] 返回连接的下一路径
```lua
P:get_next_pi(路径: int) -> 连接的下一路径: int
```

### [二十七] 返回所有连接的路径
```lua
P:get_connected_paths(路径: int) -> 连接路径列表: list{ 路径: int... }
```

### [二十八] 返回所有有效节点
```lua
P:get_all_valid_pos(x, y, 最小距离: num, 最大距离: num, 地形标签: int, 过滤函数: func, 标签: int, 子路径: list{ 子路径: int }) -> 有效节点列表: list{ 节点: int... }
```

# 网格函数